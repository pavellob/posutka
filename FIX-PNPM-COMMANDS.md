# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ pnpm –∫–æ–º–∞–Ω–¥ –≤ Docker

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:**
```
ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command "packages/datalayer-prisma" not found
```

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å pnpm –∫–æ–º–∞–Ω–¥**
- **–ë—ã–ª–æ**: `pnpm -C packages/datalayer-prisma prisma db push`
- **–°—Ç–∞–ª–æ**: `cd packages/datalayer-prisma && pnpm prisma db push && cd ../..`

### 2. **–°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç** `scripts/migrate-and-seed.sh`
- –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π –∏ —á–∏—Ç–∞–µ–º—ã–π
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω Dockerfile**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω–µ—à–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –≤–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ë–æ–ª–µ–µ —á–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

## üöÄ **–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

### **Dockerfile:**
```dockerfile
# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
RUN chmod +x ./scripts/migrate-and-seed.sh

# –í start.sh –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–Ω–µ—à–Ω–∏–π —Å–∫—Ä–∏–ø—Ç
./scripts/migrate-and-seed.sh
```

### **scripts/migrate-and-seed.sh:**
```bash
# –ú–∏–≥—Ä–∞—Ü–∏–∏
until cd packages/datalayer-prisma && pnpm prisma db push --accept-data-loss && cd ../..; do
  echo "‚è≥ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –∂–¥–µ–º..."
  sleep 5
done

# –°–∏–¥—ã
if [ -f "packages/datalayer-prisma/prisma-seed.ts" ]; then
  cd packages/datalayer-prisma && pnpm tsx prisma-seed.ts && cd ../..
elif [ -f "packages/datalayer-prisma/prisma-seed.js" ]; then
  cd packages/datalayer-prisma && pnpm seed && cd ../..
fi
```

## üìù **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
   ```bash
   git add .
   git commit -m "Fix pnpm commands in Docker"
   git push
   ```

2. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å** –≤ Northflank

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã pnpm!

## üéØ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ Prisma –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –°–∏–¥—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é pnpm
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–æ–≥–∞—Ç—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–¢–µ–ø–µ—Ä—å pnpm –∫–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ! üöÄ
