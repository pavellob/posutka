schema @link(url: "https://specs.apollo.dev/link/v1.0") @link(url: "https://specs.apollo.dev/join/v0.3", for: EXECUTION) @link(url: "https://the-guild.dev/graphql/mesh/spec/v1.0", import: ["@merge", "@transport", "@extraSchemaDefinitionDirective"]) {
  query: Query
  mutation: Mutation
  subscription: Subscription
}

directive @join__enumValue(graph: join__Graph!) repeatable on ENUM_VALUE

directive @join__graph(name: String!, url: String!) on ENUM_VALUE

directive @join__field(graph: join__Graph, requires: join__FieldSet, provides: join__FieldSet, type: String, external: Boolean, override: String, usedOverridden: Boolean) repeatable on FIELD_DEFINITION | INPUT_FIELD_DEFINITION

directive @join__implements(graph: join__Graph!, interface: String!) repeatable on OBJECT | INTERFACE

directive @join__type(graph: join__Graph!, key: join__FieldSet, extension: Boolean! = false, resolvable: Boolean! = true, isInterfaceObject: Boolean! = false) repeatable on OBJECT | INTERFACE | UNION | ENUM | INPUT_OBJECT | SCALAR

directive @join__unionMember(graph: join__Graph!, member: String!) repeatable on UNION

directive @link(url: String, as: String, for: link__Purpose, import: [link__Import]) repeatable on SCHEMA

directive @merge(subgraph: String, argsExpr: String, keyArg: String, keyField: String, key: [String!], additionalArgs: String) repeatable on FIELD_DEFINITION

directive @transport(kind: String!, subgraph: String!, location: String!, headers: [[String]], options: TransportOptions) repeatable on SCHEMA

directive @extraSchemaDefinitionDirective(directives: _DirectiveExtensions) repeatable on OBJECT

directive @additionalField on FIELD_DEFINITION

scalar join__FieldSet

scalar link__Import

enum link__Purpose {
  """
  `SECURITY` features provide metadata necessary to securely resolve fields.
  """
  SECURITY
  """
  `EXECUTION` features provide metadata necessary for operation execution.
  """
  EXECUTION
}

enum join__Graph {
  AI_SUBGRAPH @join__graph(name: "ai-subgraph", url: "http://localhost:4008/graphql")
  BILLING_SUBGRAPH @join__graph(name: "billing-subgraph", url: "http://localhost:4004/graphql")
  BOOKINGS_SUBGRAPH @join__graph(name: "bookings-subgraph", url: "http://localhost:4002/graphql")
  CLEANING_SUBGRAPH @join__graph(name: "cleaning-subgraph", url: "http://localhost:4010/graphql")
  IAM_SUBGRAPH @join__graph(name: "iam-subgraph", url: "http://localhost:4009/graphql")
  IDENTITY_SUBGRAPH @join__graph(name: "identity-subgraph", url: "http://localhost:4005/graphql")
  INVENTORY_SUBGRAPH @join__graph(name: "inventory-subgraph", url: "http://localhost:4001/graphql")
  LEGAL_SUBGRAPH @join__graph(name: "legal-subgraph", url: "http://localhost:4007/graphql")
  LISTINGS_SUBGRAPH @join__graph(name: "listings-subgraph", url: "http://localhost:4006/graphql")
  NOTIFICATIONS_SUBGRAPH @join__graph(name: "notifications-subgraph", url: "http://localhost:4011/graphql")
  OPS_SUBGRAPH @join__graph(name: "ops-subgraph", url: "http://localhost:4003/graphql")
  PRICING_SUBGRAPH @join__graph(name: "pricing-subgraph", url: "http://localhost:4012/graphql")
}

"""
Универсальный уникальный идентификатор (UUID v4).
Используется для всех сущностей в системе.
Пример: "550e8400-e29b-41d4-a716-446655440000"
"""
scalar UUID @join__type(graph: AI_SUBGRAPH) @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: NOTIFICATIONS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH)

"""
Дата и время в формате ISO 8601 с часовым поясом.
Пример: "2024-01-15T14:30:00Z" или "2024-01-15T14:30:00+03:00"
"""
scalar DateTime @join__type(graph: AI_SUBGRAPH) @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: NOTIFICATIONS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH)

"""
Произвольный JSON объект для хранения метаданных и дополнительной информации.
Может содержать любую валидную JSON структуру.
Пример: {"key": "value", "nested": {"array": [1, 2, 3]}}
"""
scalar JSON @join__type(graph: AI_SUBGRAPH) @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH)

scalar TransportOptions @join__type(graph: AI_SUBGRAPH) @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: NOTIFICATIONS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH)

scalar Upload @join__type(graph: CLEANING_SUBGRAPH)

scalar _DirectiveExtensions @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH)

"""
Организация (компания, отель, хостел и т.д.).
Ссылка на основную сущность из identity-subgraph.
"""
type Organization @join__type(graph: AI_SUBGRAPH) @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH, key: "id") @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: NOTIFICATIONS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) {
  """Уникальный идентификатор организации"""
  id: UUID!
  """Название организации"""
  name: String! @join__field(graph: IDENTITY_SUBGRAPH)
  """Часовой пояс организации (например, "Europe/Moscow")"""
  timezone: String! @join__field(graph: IDENTITY_SUBGRAPH)
  """Основная валюта организации (ISO 4217 код)"""
  currency: String! @join__field(graph: IDENTITY_SUBGRAPH)
  """Список всех участников организации"""
  members: [Membership!]! @join__field(graph: IDENTITY_SUBGRAPH)
  """Дата и время создания организации"""
  createdAt: DateTime! @join__field(graph: IDENTITY_SUBGRAPH)
  """Дата и время последнего обновления"""
  updatedAt: DateTime! @join__field(graph: IDENTITY_SUBGRAPH)
}

"""
Результат выполнения AI-команды.
Содержит информацию об успешности выполнения и затронутых сущностях.
"""
type AICommandResult @join__type(graph: AI_SUBGRAPH) {
  """Успешно ли выполнена команда"""
  ok: Boolean!
  """Сообщение о результате выполнения (опционально)"""
  message: String
  """Список ID сущностей, которые были затронуты командой"""
  affectedIds: [UUID!]!
  """Предварительный просмотр изменений в формате JSON (опционально)"""
  preview: JSON
}

"""Результат генерации GraphQL запроса из естественного языка."""
type GraphQLQueryResult @join__type(graph: AI_SUBGRAPH) {
  """Сгенерированный GraphQL запрос"""
  query: String!
  """Переменные для запроса"""
  variables: JSON
  """Описание того, что делает запрос"""
  description: String
  """Успешно ли сгенерирован запрос"""
  success: Boolean!
  """Сообщение об ошибке (если есть)"""
  error: String
}

"""Запросы для работы с AI-функциональностью."""
type Query @extraSchemaDefinitionDirective(directives: {transport: [{kind: "http", subgraph: "iam-subgraph", location: "http://localhost:4009/graphql", headers: [["Authorization", "{context.headers.authorization}"]], options: {}}]}) @extraSchemaDefinitionDirective(directives: {transport: [{kind: "http", subgraph: "identity-subgraph", location: "http://localhost:4005/graphql", headers: [["Authorization", "{context.headers.authorization}"]], options: {}}]}) @extraSchemaDefinitionDirective(directives: {transport: [{kind: "http", subgraph: "inventory-subgraph", location: "http://localhost:4001/graphql", headers: [["Authorization", "{context.headers.authorization}"]], options: {}}]}) @join__type(graph: AI_SUBGRAPH) @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: NOTIFICATIONS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH) {
  """Пустой запрос (требуется для GraphQL схемы)"""
  _empty: Boolean @join__field(graph: AI_SUBGRAPH)
  """Получить счет по ID"""
  invoice(id: UUID!): Invoice @merge(subgraph: "billing-subgraph", keyField: "id", keyArg: "id") @join__field(graph: BILLING_SUBGRAPH)
  """Получить список счетов организации с пагинацией и фильтрацией"""
  invoices(orgId: UUID!, first: Int, after: String, status: InvoiceStatus): InvoiceConnection! @join__field(graph: BILLING_SUBGRAPH)
  """Получить платеж по ID"""
  payment(id: UUID!): Payment @merge(subgraph: "billing-subgraph", keyField: "id", keyArg: "id") @join__field(graph: BILLING_SUBGRAPH)
  """Получить счет по ID заказа на услуги"""
  invoiceByOrderId(orderId: UUID!): Invoice @join__field(graph: BILLING_SUBGRAPH)
  """Получить бронирование по ID"""
  booking(id: UUID!): Booking @merge(subgraph: "bookings-subgraph", keyField: "id", keyArg: "id") @join__field(graph: BOOKINGS_SUBGRAPH)
  """Получить список бронирований с фильтрацией и пагинацией"""
  bookings(
    """ID организации для фильтрации"""
    orgId: UUID
    """ID единицы недвижимости для фильтрации"""
    unitId: UUID
    """Начальная дата для фильтрации (включительно)"""
    from: DateTime
    """Конечная дата для фильтрации (включительно)"""
    to: DateTime
    """Статус бронирования для фильтрации"""
    status: BookingStatus
    """Количество элементов на странице"""
    first: Int
    """Курсор для пагинации"""
    after: String
  ): BookingConnection! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Получить уборщика по ID"""
  cleaner(id: UUID!): Cleaner @merge(subgraph: "cleaning-subgraph", keyField: "id", keyArg: "id") @join__field(graph: CLEANING_SUBGRAPH)
  """Получить список уборщиков"""
  cleaners(
    """ID организации для фильтрации"""
    orgId: UUID!
    """Только активные уборщики"""
    isActive: Boolean
    """Количество элементов на странице"""
    first: Int
    """Курсор для пагинации"""
    after: String
  ): CleanerConnection! @join__field(graph: CLEANING_SUBGRAPH)
  """Получить привязанных уборщиков для квартиры"""
  unitPreferredCleaners(
    """ID единицы недвижимости"""
    unitId: UUID!
  ): [CleanerPreference!]! @join__field(graph: CLEANING_SUBGRAPH)
  """Получить шаблон уборки по ID"""
  cleaningTemplate(id: UUID!): CleaningTemplate @merge(subgraph: "cleaning-subgraph", keyField: "id", keyArg: "id") @join__field(graph: CLEANING_SUBGRAPH)
  """Получить шаблоны уборки для квартиры"""
  cleaningTemplates(
    """ID единицы недвижимости"""
    unitId: UUID!
  ): [CleaningTemplate!]! @merge(subgraph: "cleaning-subgraph", keyField: "id", keyArg: "unitId") @join__field(graph: CLEANING_SUBGRAPH)
  """Получить уборку по ID"""
  cleaning(id: UUID!): Cleaning @merge(subgraph: "cleaning-subgraph", keyField: "id", keyArg: "id") @join__field(graph: CLEANING_SUBGRAPH)
  """Получить уборку по ID задачи"""
  cleaningByTask(taskId: UUID!): Cleaning @join__field(graph: CLEANING_SUBGRAPH)
  """Получить список уборок с фильтрацией"""
  cleanings(
    """ID организации для фильтрации"""
    orgId: UUID
    """ID единицы недвижимости для фильтрации"""
    unitId: UUID
    """ID уборщика для фильтрации"""
    cleanerId: UUID
    """ID бронирования для фильтрации"""
    bookingId: UUID
    """ID связанной задачи для фильтрации"""
    taskId: UUID
    """Статус уборки для фильтрации"""
    status: CleaningStatus
    """Начальная дата для фильтрации"""
    from: DateTime
    """Конечная дата для фильтрации"""
    to: DateTime
    """Количество элементов на странице"""
    first: Int
    """Курсор для пагинации"""
    after: String
  ): CleaningConnection! @join__field(graph: CLEANING_SUBGRAPH)
  """Получить список чеклистов для квартиры"""
  checklistsByUnit(unitId: UUID!): [ChecklistTemplate!]! @join__field(graph: CLEANING_SUBGRAPH)
  """Получить инстанс чек-листа по ID"""
  checklistInstance(id: UUID!): ChecklistInstance @merge(subgraph: "cleaning-subgraph", keyField: "id", keyArg: "id") @join__field(graph: CLEANING_SUBGRAPH)
  """Получить инстанс чек-листа по юниту и стадии"""
  checklistByUnitAndStage(unitId: UUID!, stage: ChecklistStage!): ChecklistInstance @join__field(graph: CLEANING_SUBGRAPH)
  """Получить инстанс чек-листа по уборке и стадии"""
  checklistByCleaning(cleaningId: UUID!, stage: ChecklistStage!): ChecklistInstance @join__field(graph: CLEANING_SUBGRAPH)
  """Получить шаблон чек-листа для юнита"""
  checklistTemplate(unitId: UUID!, version: Int): ChecklistTemplate @join__field(graph: CLEANING_SUBGRAPH)
  """Получить статистику пользователей"""
  userStats: UserStats! @join__field(graph: IAM_SUBGRAPH)
  """Получить список пользователей с расширенными фильтрами"""
  usersAdvanced(orgId: UUID!, first: Int, after: String, filters: UserFilters, sort: UserSort): IAMUserConnection! @join__field(graph: IAM_SUBGRAPH)
  """Получить пользователя с полной информацией"""
  userProfile(id: UUID!): IAMUser @join__field(graph: IAM_SUBGRAPH)
  """Получить активные сессии пользователя"""
  userSessions(userId: UUID!): [UserSession!]! @merge(subgraph: "iam-subgraph", keyField: "id", keyArg: "userId") @join__field(graph: IAM_SUBGRAPH)
  """Получить историю активности пользователя"""
  userActivity(userId: UUID!, limit: Int): [ActivityLog!]! @join__field(graph: IAM_SUBGRAPH)
  """Получить все разрешения"""
  permissions: [Permission!]! @join__field(graph: IAM_SUBGRAPH)
  """Получить разрешения пользователя"""
  userPermissions(userId: UUID!): [Permission!]! @join__field(graph: IAM_SUBGRAPH)
  """Получить текущего авторизованного пользователя"""
  me: User @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить пользователя по ID"""
  user(id: UUID!): User @merge(subgraph: "identity-subgraph", keyField: "id", keyArg: "id") @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить пользователя по email адресу"""
  userByEmail(email: String!): User @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить список пользователей с пагинацией"""
  users(first: Int, after: String): UserConnection! @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить организацию по ID"""
  organization(id: UUID!): Organization @merge(subgraph: "identity-subgraph", keyField: "id", keyArg: "id") @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить список организаций с пагинацией"""
  organizations(first: Int, after: String): OrganizationConnection! @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить все организации, в которых состоит пользователь"""
  organizationsByUserId(userId: UUID!): [Organization!]! @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить членство по ID"""
  membership(id: UUID!): Membership @merge(subgraph: "identity-subgraph", keyField: "id", keyArg: "id") @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить всех участников организации"""
  membershipsByOrg(orgId: UUID!): [Membership!]! @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить все членства пользователя"""
  membershipsByUser(userId: UUID!): [Membership!]! @join__field(graph: IDENTITY_SUBGRAPH)
  """Получить объект недвижимости по ID"""
  property(id: UUID!): Property @merge(subgraph: "inventory-subgraph", keyField: "id", keyArg: "id") @join__field(graph: INVENTORY_SUBGRAPH)
  """Получить единицу недвижимости по ID"""
  unit(id: UUID!): Unit @merge(subgraph: "inventory-subgraph", keyField: "id", keyArg: "id") @join__field(graph: INVENTORY_SUBGRAPH)
  """Получить все объекты недвижимости организации"""
  propertiesByOrgId(orgId: UUID!): [Property]! @join__field(graph: INVENTORY_SUBGRAPH)
  """Получить все единицы недвижимости в объекте"""
  unitsByPropertyId(propertyId: UUID!): [Unit!]! @join__field(graph: INVENTORY_SUBGRAPH)
  """Получить документ по ID"""
  document(id: UUID!): Document @merge(subgraph: "legal-subgraph", keyField: "id", keyArg: "id") @join__field(graph: LEGAL_SUBGRAPH)
  """Получить транзакцию с депозитом по ID"""
  depositTx(id: UUID!): DepositTransaction @join__field(graph: LEGAL_SUBGRAPH)
  """Получить все документы по бронированию"""
  documentsByBookingId(bookingId: UUID!): [Document!]! @join__field(graph: LEGAL_SUBGRAPH)
  """Получить все транзакции с депозитом по бронированию"""
  depositTransactionsByBookingId(bookingId: UUID!): [DepositTransaction!]! @join__field(graph: LEGAL_SUBGRAPH)
  """Получить объявление по ID"""
  listing(id: UUID!): Listing @merge(subgraph: "listings-subgraph", keyField: "id", keyArg: "id") @join__field(graph: LISTINGS_SUBGRAPH)
  """Получить список объявлений для единицы недвижимости с пагинацией"""
  listings(unitId: UUID!, first: Int, after: String): ListingConnection! @join__field(graph: LISTINGS_SUBGRAPH)
  """Получить уведомление по ID"""
  notification(id: UUID!): Notification @merge(subgraph: "notifications-subgraph", keyField: "id", keyArg: "id") @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Получить список уведомлений с фильтрацией"""
  notifications(
    """ID пользователя для фильтрации"""
    userId: UUID
    """ID организации для фильтрации"""
    orgId: UUID
    """Статус для фильтрации"""
    status: NotificationStatus
    """Тип события для фильтрации"""
    eventType: EventType
    """Только непрочитанные"""
    unreadOnly: Boolean
    """Количество элементов на странице"""
    first: Int
    """Курсор для пагинации"""
    after: String
  ): NotificationConnection! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Получить настройки уведомлений пользователя"""
  userNotificationSettings(userId: UUID!): UserNotificationSettings @merge(subgraph: "notifications-subgraph", keyField: "userId", keyArg: "userId") @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Получить шаблон уведомления"""
  notificationTemplate(id: UUID!): NotificationTemplate @merge(subgraph: "notifications-subgraph", keyField: "id", keyArg: "id") @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Получить все шаблоны"""
  notificationTemplates(eventType: EventType): [NotificationTemplate!]! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Получить задачу по ID"""
  task(id: UUID!): Task @merge(subgraph: "ops-subgraph", keyField: "id", keyArg: "id") @join__field(graph: OPS_SUBGRAPH)
  """Получить список задач с фильтрацией и пагинацией"""
  tasks(
    """ID организации для фильтрации"""
    orgId: UUID!
    """Статус задач для фильтрации (опционально)"""
    status: TaskStatus
    """Тип задач для фильтрации (опционально)"""
    type: TaskType
    """Количество элементов на странице"""
    first: Int
    """Курсор для пагинации"""
    after: String
  ): TaskConnection! @join__field(graph: OPS_SUBGRAPH)
  """Получить заказ на услуги по ID"""
  serviceOrder(id: UUID!): ServiceOrder @merge(subgraph: "ops-subgraph", keyField: "id", keyArg: "id") @join__field(graph: OPS_SUBGRAPH)
  """Получить поставщика услуг по ID"""
  serviceProvider(id: UUID!): ServiceProvider @merge(subgraph: "ops-subgraph", keyField: "id", keyArg: "id") @join__field(graph: OPS_SUBGRAPH)
  """Получить список поставщиков услуг с фильтрацией по типам услуг"""
  serviceProviders(serviceTypes: [TaskType!]): [ServiceProvider!]! @join__field(graph: OPS_SUBGRAPH)
  """Получить правило ценообразования"""
  cleaningPricingRule(orgId: UUID!, unitId: UUID): CleaningPricingRule @join__field(graph: PRICING_SUBGRAPH)
  """Получить все правила для организации/юнита"""
  cleaningPricingRules(orgId: UUID!, unitId: UUID): [CleaningPricingRule!]! @join__field(graph: PRICING_SUBGRAPH)
  """Рассчитать стоимость уборки"""
  calculateCleaningCost(unitId: UUID!, grade: UnitGrade, difficulty: CleaningDifficulty, mode: CleaningCoeffMode): CleaningCostQuote! @join__field(graph: PRICING_SUBGRAPH)
}

"""Мутации для выполнения AI-команд."""
type Mutation @join__type(graph: AI_SUBGRAPH) @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: NOTIFICATIONS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH) {
  """Выполнить AI-команду на естественном языке"""
  aiCommand(
    """ID организации, для которой выполняется команда"""
    orgId: UUID!
    """Текст команды на естественном языке"""
    command: String!
    """Дополнительный контекст в формате JSON (опционально)"""
    context: JSON
  ): AICommandResult! @join__field(graph: AI_SUBGRAPH)
  """Сгенерировать GraphQL запрос из естественного языка"""
  generateGraphQLQuery(
    """ID организации"""
    orgId: UUID!
    """Описание запроса на естественном языке"""
    description: String!
    """Настройки AI-адаптера"""
    adapterConfig: AIAdapterConfig!
    """Дополнительный контекст схемы (опционально)"""
    schemaContext: JSON
  ): GraphQLQueryResult! @join__field(graph: AI_SUBGRAPH)
  """Выполнить сгенерированный GraphQL запрос"""
  executeGeneratedQuery(
    """ID организации"""
    orgId: UUID!
    """GraphQL запрос для выполнения"""
    query: String!
    """Переменные для запроса"""
    variables: JSON
  ): JSON! @join__field(graph: AI_SUBGRAPH)
  """Создать новый счет"""
  createInvoice(input: CreateInvoiceInput!): Invoice! @join__field(graph: BILLING_SUBGRAPH)
  """Добавить позиции в существующий счет"""
  addInvoiceItems(input: AddInvoiceItemsInput!): Invoice! @join__field(graph: BILLING_SUBGRAPH)
  """Отменить счет"""
  cancelInvoice(id: UUID!): Invoice! @join__field(graph: BILLING_SUBGRAPH)
  """Записать платеж по счету"""
  recordPayment(input: RecordPaymentInput!): Payment! @join__field(graph: BILLING_SUBGRAPH)
  """Сгенерировать ссылку для онлайн-оплаты"""
  generatePaymentLink(input: GeneratePaymentLinkInput!): PaymentLink! @join__field(graph: BILLING_SUBGRAPH)
  """Оформить возврат средств (создает запись Payment со знаком минус)"""
  issueRefund(input: IssueRefundInput!): Payment! @join__field(graph: BILLING_SUBGRAPH)
  """Создать новое бронирование"""
  createBooking(input: CreateBookingInput!): Booking! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Отменить бронирование с указанием причины"""
  cancelBooking(id: UUID!, reason: String): Booking! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Изменить даты заезда и выезда в бронировании"""
  changeBookingDates(id: UUID!, checkIn: DateTime!, checkOut: DateTime!): Booking! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Создать нового уборщика"""
  createCleaner(input: CreateCleanerInput!): Cleaner! @join__field(graph: CLEANING_SUBGRAPH)
  """Обновить данные уборщика"""
  updateCleaner(id: UUID!, input: UpdateCleanerInput!): Cleaner! @join__field(graph: CLEANING_SUBGRAPH)
  """Деактивировать уборщика (soft delete)"""
  deactivateCleaner(id: UUID!): Cleaner! @join__field(graph: CLEANING_SUBGRAPH)
  """Активировать уборщика (отменить деактивацию)"""
  activateCleaner(id: UUID!): Cleaner! @join__field(graph: CLEANING_SUBGRAPH)
  """Создать шаблон уборки для квартиры"""
  createCleaningTemplate(input: CreateCleaningTemplateInput!): CleaningTemplate! @join__field(graph: CLEANING_SUBGRAPH)
  """Обновить шаблон уборки"""
  updateCleaningTemplate(id: UUID!, input: UpdateCleaningTemplateInput!): CleaningTemplate! @join__field(graph: CLEANING_SUBGRAPH)
  """Удалить шаблон уборки"""
  deleteCleaningTemplate(id: UUID!): Boolean! @join__field(graph: CLEANING_SUBGRAPH)
  """Запланировать уборку"""
  scheduleCleaning(input: ScheduleCleaningInput!): Cleaning! @join__field(graph: CLEANING_SUBGRAPH)
  """Начать уборку"""
  startCleaning(id: UUID!): Cleaning! @join__field(graph: CLEANING_SUBGRAPH)
  """Завершить уборку"""
  completeCleaning(id: UUID!, input: CompleteCleaningInput!): Cleaning! @join__field(graph: CLEANING_SUBGRAPH)
  """Одобрить уборку менеджером"""
  approveCleaning(id: UUID!, managerId: UUID!, comment: String): Cleaning! @join__field(graph: CLEANING_SUBGRAPH)
  """Отменить уборку"""
  cancelCleaning(id: UUID!, reason: String): Cleaning! @join__field(graph: CLEANING_SUBGRAPH)
  """Взять уборку в работу (самоназначение)"""
  assignCleaningToMe(cleaningId: UUID!): Cleaning! @join__field(graph: CLEANING_SUBGRAPH)
  """Обновить чеклист уборки"""
  updateCleaningChecklist(id: UUID!, items: [ChecklistItemInput!]!): Cleaning! @join__field(graph: CLEANING_SUBGRAPH)
  """Выставить сложность уборки после обследования (PRE_CLEANING)"""
  setCleaningDifficulty(input: SetCleaningDifficultyInput!): Cleaning! @join__field(graph: CLEANING_SUBGRAPH)
  """Добавить уборщика в список предпочтительных для квартиры"""
  addPreferredCleaner(unitId: UUID!, cleanerId: UUID!): Unit! @join__field(graph: CLEANING_SUBGRAPH)
  """Удалить уборщика из списка предпочтительных для квартиры"""
  removePreferredCleaner(unitId: UUID!, cleanerId: UUID!): Unit! @join__field(graph: CLEANING_SUBGRAPH)
  """Создать документ приемки квартиры перед уборкой"""
  createPreCleaningDocument(cleaningId: UUID!, input: CreateCleaningDocumentInput!): CleaningDocument! @join__field(graph: CLEANING_SUBGRAPH)
  """Создать документ сдачи квартиры после уборки"""
  createPostCleaningDocument(cleaningId: UUID!, input: CreateCleaningDocumentInput!): CleaningDocument! @join__field(graph: CLEANING_SUBGRAPH)
  """Добавить фото к документу"""
  addPhotoToDocument(documentId: UUID!, input: AddPhotoInput!): CleaningDocumentPhoto! @join__field(graph: CLEANING_SUBGRAPH)
  """Удалить фото из документа"""
  deletePhotoFromDocument(photoId: UUID!): Boolean! @join__field(graph: CLEANING_SUBGRAPH)
  """Создать чек-лист"""
  createChecklist(input: CreateChecklistInput!): Checklist! @join__field(graph: CLEANING_SUBGRAPH)
  """Активировать чек-лист (деактивирует остальные для этого юнита)"""
  activateChecklist(id: UUID!): Checklist! @join__field(graph: CLEANING_SUBGRAPH)
  """Удалить чек-лист"""
  deleteChecklist(id: UUID!): Boolean! @join__field(graph: CLEANING_SUBGRAPH)
  """Обновить порядок пунктов чек-листа"""
  updateChecklistItemOrder(checklistId: UUID!, itemIds: [UUID!]!): Checklist! @join__field(graph: CLEANING_SUBGRAPH)
  """Создать инстанс чек-листа"""
  createChecklistInstance(unitId: UUID!, stage: ChecklistStage!, cleaningId: UUID): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Добавить пункт в инстанс"""
  addItem(input: AddItemInput!): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Обновить пункт в инстансе"""
  updateItem(input: UpdateItemInput!): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Удалить пункт из инстанса"""
  removeItem(instanceId: UUID!, itemKey: String!): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Промоут инстанса в следующую стадию"""
  promoteChecklist(fromInstanceId: UUID!, toStage: ChecklistStage!): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Отправить чек-лист"""
  submitChecklist(id: UUID!): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Заблокировать чек-лист"""
  lockChecklist(id: UUID!): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Добавить ответ на пункт"""
  answer(input: AnswerInput!): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Добавить аттачмент (фото) к пункту"""
  attach(input: AttachmentInput!): ChecklistInstance! @join__field(graph: CLEANING_SUBGRAPH)
  """Получить presigned URLs для загрузки фото к ответам"""
  getChecklistAttachmentUploadUrls(input: GetChecklistAttachmentUploadUrlsInput!): [PresignedUploadUrl!]! @join__field(graph: CLEANING_SUBGRAPH)
  """Удалить аттачмент (фото) из пункта"""
  removeChecklistAttachment(attachmentId: UUID!): Boolean! @join__field(graph: CLEANING_SUBGRAPH)
  """Создать шаблон для юнита"""
  createChecklistTemplate(unitId: UUID!): ChecklistTemplate! @join__field(graph: CLEANING_SUBGRAPH)
  """Добавить пункт в шаблон"""
  addTemplateItem(input: AddTemplateItemInput!): ChecklistTemplate! @join__field(graph: CLEANING_SUBGRAPH)
  """Обновить пункт в шаблоне"""
  updateTemplateItem(input: UpdateTemplateItemInput!): ChecklistTemplate! @join__field(graph: CLEANING_SUBGRAPH)
  """Удалить пункт из шаблона"""
  removeTemplateItem(templateId: UUID!, itemKey: String!): ChecklistTemplate! @join__field(graph: CLEANING_SUBGRAPH)
  """Обновить порядок пунктов в шаблоне"""
  updateTemplateItemOrder(templateId: UUID!, itemKeys: [String!]!): ChecklistTemplate! @join__field(graph: CLEANING_SUBGRAPH)
  """Добавить пример фото к пункту шаблона"""
  addTemplateItemExampleMedia(input: AddTemplateItemExampleMediaInput!): [ChecklistItemTemplateMedia!]! @join__field(graph: CLEANING_SUBGRAPH)
  """Удалить пример фото из пункта шаблона"""
  removeTemplateItemExampleMedia(mediaId: UUID!): Boolean! @join__field(graph: CLEANING_SUBGRAPH)
  """Получить presigned URLs для загрузки примеров фото"""
  getTemplateItemExampleMediaUploadUrls(input: GetTemplateItemExampleMediaUploadUrlsInput!): [PresignedUploadUrl!]! @join__field(graph: CLEANING_SUBGRAPH)
  """Создать пользователя IAM (только для админов)"""
  createIAMUser(input: CreateIAMUserInput!): IAMUser! @join__field(graph: IAM_SUBGRAPH)
  """Обновить пользователя IAM"""
  updateIAMUser(id: UUID!, input: UpdateIAMUserInput!): IAMUser! @join__field(graph: IAM_SUBGRAPH)
  """Удалить пользователя IAM"""
  deleteIAMUser(id: UUID!): Boolean! @join__field(graph: IAM_SUBGRAPH)
  """Сменить пароль"""
  changePassword(input: ChangePasswordInput!): Boolean! @join__field(graph: IAM_SUBGRAPH)
  """Сбросить пароль (админ)"""
  resetUserPassword(userId: UUID!, input: ResetPasswordInput!): Boolean! @join__field(graph: IAM_SUBGRAPH)
  """Заблокировать пользователя"""
  lockUser(userId: UUID!, reason: String!): Boolean! @join__field(graph: IAM_SUBGRAPH)
  """Разблокировать пользователя"""
  unlockUser(userId: UUID!): Boolean! @join__field(graph: IAM_SUBGRAPH)
  """Завершить сессию пользователя"""
  terminateSession(sessionId: UUID!): Boolean! @join__field(graph: IAM_SUBGRAPH)
  """Завершить все сессии пользователя"""
  terminateAllUserSessions(userId: UUID!): Boolean! @join__field(graph: IAM_SUBGRAPH)
  """Назначить разрешения пользователю"""
  assignPermissions(userId: UUID!, permissionIds: [UUID!]!): IAMUser! @join__field(graph: IAM_SUBGRAPH)
  """Отозвать разрешения у пользователя"""
  revokePermissions(userId: UUID!, permissionIds: [UUID!]!): IAMUser! @join__field(graph: IAM_SUBGRAPH)
  """Создать нового пользователя"""
  createUser(input: CreateUserInput!): User! @join__field(graph: IDENTITY_SUBGRAPH)
  """Обновить данные пользователя"""
  updateUser(id: UUID!, input: CreateUserInput!): User! @join__field(graph: IDENTITY_SUBGRAPH)
  """Зарегистрировать нового пользователя"""
  register(input: RegisterInput!): AuthPayload! @join__field(graph: IDENTITY_SUBGRAPH)
  """Войти в систему"""
  login(input: LoginInput!): AuthPayload! @join__field(graph: IDENTITY_SUBGRAPH)
  """Обновить токен доступа"""
  refreshToken(input: RefreshTokenInput!): AuthPayload! @join__field(graph: IDENTITY_SUBGRAPH)
  """Выйти из системы"""
  logout: Boolean! @join__field(graph: IDENTITY_SUBGRAPH)
  """Запросить сброс пароля"""
  forgotPassword(email: String!): Boolean! @join__field(graph: IDENTITY_SUBGRAPH)
  """Сбросить пароль"""
  resetPassword(input: ResetPasswordInput!): Boolean! @join__field(graph: IDENTITY_SUBGRAPH)
  """Создать новую организацию"""
  createOrganization(input: CreateOrganizationInput!): Organization! @join__field(graph: IDENTITY_SUBGRAPH)
  """Обновить данные организации"""
  updateOrganization(id: UUID!, input: CreateOrganizationInput!): Organization! @join__field(graph: IDENTITY_SUBGRAPH)
  """Добавить пользователя в организацию"""
  addMember(input: AddMemberInput!): Membership! @join__field(graph: IDENTITY_SUBGRAPH)
  """Изменить роль участника в организации"""
  updateMemberRole(input: UpdateMemberRoleInput!): Membership! @join__field(graph: IDENTITY_SUBGRAPH)
  """Удалить участника из организации"""
  removeMember(membershipId: UUID!): Boolean! @join__field(graph: IDENTITY_SUBGRAPH)
  """Создать новый объект недвижимости"""
  createProperty(orgId: String!, title: String!, address: String!, amenities: [String!], propertyType: String, category: String, dealStatus: String, country: String, region: String, district: String, localityName: String, apartment: String, metroName: String, metroTimeOnFoot: Int, metroTimeOnTransport: Int, latitude: Float, longitude: Float, totalArea: Float, livingArea: Float, kitchenArea: Float, rooms: Int, roomsOffered: Int, floor: Int, floorsTotal: Int, buildingType: String, buildingYear: Int, buildingSeries: String, elevator: Boolean, parking: Boolean, security: Boolean, concierge: Boolean, playground: Boolean, gym: Boolean, balcony: Boolean, loggia: Boolean, airConditioning: Boolean, internet: Boolean, washingMachine: Boolean, dishwasher: Boolean, tv: Boolean, renovation: String, furniture: Boolean, isElite: Boolean, yandexBuildingId: String, yandexHouseId: String): Property! @join__field(graph: INVENTORY_SUBGRAPH)
  """Обновить объект недвижимости"""
  updateProperty(id: UUID!, title: String!, address: String!, propertyType: String, category: String, dealStatus: String, country: String, region: String, district: String, localityName: String, apartment: String, metroName: String, metroTimeOnFoot: Int, metroTimeOnTransport: Int, latitude: Float, longitude: Float, totalArea: Float, livingArea: Float, kitchenArea: Float, rooms: Int, roomsOffered: Int, floor: Int, floorsTotal: Int, buildingType: String, buildingYear: Int, buildingSeries: String, elevator: Boolean, parking: Boolean, security: Boolean, concierge: Boolean, playground: Boolean, gym: Boolean, balcony: Boolean, loggia: Boolean, airConditioning: Boolean, internet: Boolean, washingMachine: Boolean, dishwasher: Boolean, tv: Boolean, renovation: String, furniture: Boolean, isElite: Boolean, yandexBuildingId: String, yandexHouseId: String): Property! @join__field(graph: INVENTORY_SUBGRAPH)
  """Создать новую единицу недвижимости в объекте"""
  createUnit(propertyId: UUID!, name: String!, capacity: Int!, beds: Int!, bathrooms: Int!, amenities: [String!]): Unit! @join__field(graph: INVENTORY_SUBGRAPH)
  """Обновить единицу недвижимости"""
  updateUnit(id: UUID!, input: UpdateUnitInput!): Unit! @join__field(graph: INVENTORY_SUBGRAPH)
  """Заблокировать даты в календаре единицы недвижимости"""
  blockDates(unitId: UUID!, from: DateTime!, to: DateTime!, note: String): [CalendarDay!]! @join__field(graph: INVENTORY_SUBGRAPH)
  """Сгенерировать договор для бронирования"""
  generateContract(
    """ID бронирования, для которого генерируется договор"""
    bookingId: UUID!
    """Название шаблона договора (опционально)"""
    template: String
  ): Document! @join__field(graph: LEGAL_SUBGRAPH)
  """Выполнить действие с депозитом по бронированию"""
  depositAction(
    """ID бронирования"""
    bookingId: UUID!
    """Действие с депозитом (HOLD, RELEASE, CHARGE, CAPTURE, REFUND)"""
    action: String!
    """Сумма для действия (опционально, не требуется для RELEASE)"""
    amount: MoneyInput
  ): DepositTransaction! @join__field(graph: LEGAL_SUBGRAPH)
  """Создать новое объявление или обновить существующее"""
  upsertListing(input: UpsertListingInput!): Listing! @join__field(graph: LISTINGS_SUBGRAPH)
  """Обновить ценообразование для объявления"""
  setPricing(listingId: UUID!, basePrice: MoneyInput!, minNights: Int!, maxNights: Int): Listing! @join__field(graph: LISTINGS_SUBGRAPH)
  """Добавить правило скидки к объявлению"""
  addDiscountRule(input: DiscountRuleInput!): Listing! @join__field(graph: LISTINGS_SUBGRAPH)
  """Удалить правило скидки"""
  removeDiscountRule(id: UUID!): Listing! @join__field(graph: LISTINGS_SUBGRAPH)
  """Отправить уведомление"""
  sendNotification(input: SendNotificationInput!): Notification! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Отметить уведомление как прочитанное"""
  markAsRead(id: UUID!): Notification! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Отметить все уведомления пользователя как прочитанные"""
  markAllAsRead(userId: UUID!): Boolean! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Удалить уведомление"""
  deleteNotification(id: UUID!): Boolean! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Обновить настройки уведомлений пользователя"""
  updateNotificationSettings(input: UpdateNotificationSettingsInput!): UserNotificationSettings! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Создать или обновить шаблон уведомления"""
  upsertNotificationTemplate(input: UpsertNotificationTemplateInput!): NotificationTemplate! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Удалить шаблон уведомления"""
  deleteNotificationTemplate(id: UUID!): Boolean! @join__field(graph: NOTIFICATIONS_SUBGRAPH)
  """Создать новую задачу"""
  createTask(input: CreateTaskInput!): Task! @join__field(graph: OPS_SUBGRAPH)
  """Назначить задачу поставщику услуг"""
  assignTask(input: AssignTaskInput!): Task! @join__field(graph: OPS_SUBGRAPH)
  """Обновить статус задачи"""
  updateTaskStatus(id: UUID!, status: TaskStatus!): Task! @join__field(graph: OPS_SUBGRAPH)
  """Обновить задачу"""
  updateTask(id: UUID!, input: UpdateTaskInput!): Task! @join__field(graph: OPS_SUBGRAPH)
  """Создать заказ на услуги"""
  createServiceOrder(input: CreateServiceOrderInput!): ServiceOrder! @join__field(graph: OPS_SUBGRAPH)
  """Обновить статус заказа на услуги"""
  updateServiceOrderStatus(id: UUID!, status: String!): ServiceOrder! @join__field(graph: OPS_SUBGRAPH)
  """Создать нового поставщика услуг"""
  createServiceProvider(input: CreateServiceProviderInput!): ServiceProvider! @join__field(graph: OPS_SUBGRAPH)
  """Создать или обновить правило ценообразования"""
  upsertCleaningPricingRule(input: UpsertCleaningPricingRuleInput!): CleaningPricingRule! @join__field(graph: PRICING_SUBGRAPH)
  """Удалить правило ценообразования"""
  deleteCleaningPricingRule(id: UUID!): Boolean! @join__field(graph: PRICING_SUBGRAPH)
}

"""
Денежная сумма с валютой.
Amount хранится в копейках/центах для точности вычислений.
Пример: {amount: 150000, currency: "RUB"} = 1500.00 RUB
"""
type Money @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH) {
  """Сумма в копейках/центах (минимальная единица валюты)"""
  amount: Int!
  """Код валюты в формате ISO 4217 (RUB, USD, EUR)"""
  currency: String!
}

"""
Информация о пагинации для соединений (connections).
Используется в GraphQL для реализации cursor-based пагинации.
"""
type PageInfo @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: NOTIFICATIONS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) {
  """Есть ли следующая страница результатов"""
  hasNextPage: Boolean!
  """Есть ли предыдущая страница результатов"""
  hasPreviousPage: Boolean!
  """Курсор для начала текущей страницы"""
  startCursor: String
  """Курсор для конца текущей страницы"""
  endCursor: String
  """Общее количество элементов (опционально)"""
  totalCount: Int
}

"""
Заказ на услуги.
Ссылка на сущность из ops-subgraph.
"""
type ServiceOrder @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH, key: "id") {
  """Уникальный идентификатор заказа"""
  id: UUID!
  """Организация, разместившая заказ"""
  org: Organization! @join__field(graph: OPS_SUBGRAPH)
  """Задача, для которой создан заказ"""
  task: Task! @join__field(graph: OPS_SUBGRAPH)
  """Поставщик услуг, выполняющий заказ (опционально)"""
  provider: ServiceProvider @join__field(graph: OPS_SUBGRAPH)
  """Статус заказа (например, "pending", "confirmed", "completed")"""
  status: String! @join__field(graph: OPS_SUBGRAPH)
  """Стоимость услуг (опционально)"""
  cost: Money @join__field(graph: OPS_SUBGRAPH)
  """Счет на оплату услуг (опционально)"""
  invoice: Invoice @join__field(graph: OPS_SUBGRAPH)
  """Дата и время создания заказа"""
  createdAt: DateTime! @join__field(graph: OPS_SUBGRAPH)
  """Дата и время последнего обновления"""
  updatedAt: DateTime! @join__field(graph: OPS_SUBGRAPH)
  """Дополнительные заметки к заказу (опционально)"""
  notes: String @join__field(graph: OPS_SUBGRAPH)
}

"""
Позиция в счете.
Представляет отдельную услугу или товар в счете.
"""
type InvoiceItem @join__type(graph: BILLING_SUBGRAPH) {
  """Название позиции (например, "Проживание", "Уборка")"""
  name: String!
  """Количество единиц"""
  qty: Int!
  """Цена за единицу"""
  price: Money!
  """Общая сумма по позиции (qty * price)"""
  sum: Money!
}

"""
Счет на оплату.
Документ, содержащий список услуг/товаров и общую сумму к оплате.
"""
type Invoice @join__type(graph: BILLING_SUBGRAPH, key: "id") @join__type(graph: OPS_SUBGRAPH) {
  """Уникальный идентификатор счета"""
  id: UUID!
  """Организация, выставившая счет"""
  org: Organization! @join__field(graph: BILLING_SUBGRAPH)
  """Связанный заказ на услуги (опционально)"""
  order: ServiceOrder @join__field(graph: BILLING_SUBGRAPH)
  """Список позиций в счете"""
  items: [InvoiceItem!]! @join__field(graph: BILLING_SUBGRAPH)
  """Общая сумма счета"""
  total: Money! @join__field(graph: BILLING_SUBGRAPH)
  """Текущий статус счета"""
  status: InvoiceStatus! @join__field(graph: BILLING_SUBGRAPH)
  """Дата и время выставления счета"""
  issuedAt: DateTime! @join__field(graph: BILLING_SUBGRAPH)
  """Дата, до которой должен быть оплачен счет (опционально)"""
  dueAt: DateTime @join__field(graph: BILLING_SUBGRAPH)
}

"""
Платеж по счету.
Запись о попытке оплаты или успешной оплате счета.
"""
type Payment @join__type(graph: BILLING_SUBGRAPH, key: "id") {
  """Уникальный идентификатор платежа"""
  id: UUID!
  """Счет, по которому произведен платеж"""
  invoice: Invoice!
  """Способ оплаты"""
  method: PaymentMethod!
  """Сумма платежа"""
  amount: Money!
  """Статус платежа"""
  status: PaymentStatus!
  """Дата и время создания записи о платеже"""
  createdAt: DateTime!
  """Платежный провайдер (STRIPE, YOOKASSA, OFFLINE)"""
  provider: String
  """Идентификатор в платежном провайдере"""
  providerRef: String
  """Ссылка на чек/квитанцию об оплате"""
  receiptUrl: String
}

"""Элемент списка счетов для пагинации."""
type InvoiceEdge @join__type(graph: BILLING_SUBGRAPH) {
  """Счет"""
  node: Invoice!
  """Курсор для пагинации"""
  cursor: String!
}

"""Соединение счетов с пагинацией."""
type InvoiceConnection @join__type(graph: BILLING_SUBGRAPH) {
  """Список счетов с курсорами"""
  edges: [InvoiceEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
}

"""
Ссылка для оплаты.
Генерируется платежными провайдерами для онлайн-оплаты.
"""
type PaymentLink @join__type(graph: BILLING_SUBGRAPH) {
  """URL для перехода к оплате"""
  url: String!
  """Платежный провайдер, который сгенерировал ссылку"""
  provider: String!
  """Дата истечения ссылки (опционально)"""
  expiresAt: DateTime
}

"""
Объект недвижимости (здание, комплекс и т.д.).
Ссылка на сущность из inventory-subgraph.
"""
type Property @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH, key: "id") {
  """Уникальный идентификатор объекта недвижимости"""
  id: UUID!
  """Организация, владеющая объектом"""
  org: Organization! @join__field(graph: INVENTORY_SUBGRAPH)
  """Название объекта недвижимости"""
  title: String! @join__field(graph: INVENTORY_SUBGRAPH)
  """Адрес объекта недвижимости"""
  address: String! @join__field(graph: INVENTORY_SUBGRAPH)
  """Список удобств объекта (WiFi, парковка, бассейн и т.д.)"""
  amenities: [String!]! @join__field(graph: INVENTORY_SUBGRAPH)
  """Список единиц недвижимости в объекте"""
  units: [Unit]! @join__field(graph: INVENTORY_SUBGRAPH)
  """Тип недвижимости (жилая/коммерческая)"""
  propertyType: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Категория объекта (квартира/комната/дом/гараж)"""
  category: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Статус сделки (первичная продажа/вторичка/аренда)"""
  dealStatus: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Страна"""
  country: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Регион/область"""
  region: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Район"""
  district: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Город/населенный пункт"""
  localityName: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Номер квартиры"""
  apartment: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Название станции метро"""
  metroName: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Время до метро пешком (минуты)"""
  metroTimeOnFoot: Int @join__field(graph: INVENTORY_SUBGRAPH)
  """Время до метро на транспорте (минуты)"""
  metroTimeOnTransport: Int @join__field(graph: INVENTORY_SUBGRAPH)
  """Широта"""
  latitude: Float @join__field(graph: INVENTORY_SUBGRAPH)
  """Долгота"""
  longitude: Float @join__field(graph: INVENTORY_SUBGRAPH)
  """Общая площадь (кв.м)"""
  totalArea: Float @join__field(graph: INVENTORY_SUBGRAPH)
  """Жилая площадь (кв.м)"""
  livingArea: Float @join__field(graph: INVENTORY_SUBGRAPH)
  """Площадь кухни (кв.м)"""
  kitchenArea: Float @join__field(graph: INVENTORY_SUBGRAPH)
  """Количество комнат"""
  rooms: Int @join__field(graph: INVENTORY_SUBGRAPH)
  """Количество комнат к сдаче"""
  roomsOffered: Int @join__field(graph: INVENTORY_SUBGRAPH)
  """Этаж"""
  floor: Int @join__field(graph: INVENTORY_SUBGRAPH)
  """Общее количество этажей"""
  floorsTotal: Int @join__field(graph: INVENTORY_SUBGRAPH)
  """Материал стен (кирпичный/панельный/монолитный)"""
  buildingType: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Год постройки"""
  buildingYear: Int @join__field(graph: INVENTORY_SUBGRAPH)
  """Серия здания"""
  buildingSeries: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие лифта"""
  elevator: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие парковки"""
  parking: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие охраны"""
  security: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие консьержа"""
  concierge: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие детской площадки"""
  playground: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие спортзала"""
  gym: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие балкона"""
  balcony: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие лоджии"""
  loggia: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие кондиционера"""
  airConditioning: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие интернета"""
  internet: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие стиральной машины"""
  washingMachine: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие посудомоечной машины"""
  dishwasher: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие телевизора"""
  tv: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Состояние ремонта"""
  renovation: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Наличие мебели"""
  furniture: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """Элитная недвижимость"""
  isElite: Boolean @join__field(graph: INVENTORY_SUBGRAPH)
  """ID здания в Яндекс.Недвижимости"""
  yandexBuildingId: String @join__field(graph: INVENTORY_SUBGRAPH)
  """ID дома в Яндекс.Недвижимости"""
  yandexHouseId: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Дата создания объекта"""
  createdAt: DateTime! @join__field(graph: INVENTORY_SUBGRAPH)
  """Дата последнего обновления объекта"""
  updatedAt: DateTime! @join__field(graph: INVENTORY_SUBGRAPH)
}

"""
Единица недвижимости (номер, квартира, дом и т.д.).
Ссылка на основную сущность из inventory-subgraph.
"""
type Unit @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH, key: "id") @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) {
  """Уникальный идентификатор единицы недвижимости"""
  id: UUID!
  """Объект недвижимости, к которому относится единица"""
  property: Property! @join__field(graph: INVENTORY_SUBGRAPH)
  """Название единицы (например, "Номер 101", "Квартира 2А")"""
  name: String! @join__field(graph: INVENTORY_SUBGRAPH)
  """Максимальная вместимость (количество гостей)"""
  capacity: Int! @join__field(graph: INVENTORY_SUBGRAPH)
  """Количество кроватей"""
  beds: Int! @join__field(graph: INVENTORY_SUBGRAPH)
  """Количество ванных комнат"""
  bathrooms: Int! @join__field(graph: INVENTORY_SUBGRAPH)
  """Список удобств единицы (кондиционер, кухня, балкон и т.д.)"""
  amenities: [String!]! @join__field(graph: INVENTORY_SUBGRAPH)
  """Градация юнита по размеру (0-10)"""
  grade: UnitGrade! @join__field(graph: INVENTORY_SUBGRAPH)
  """Сложность уборки по умолчанию (0-5, fallback)"""
  cleaningDifficulty: CleaningDifficulty! @join__field(graph: INVENTORY_SUBGRAPH)
  """Инструкция по заселению для гостя (статичный текст)"""
  checkInInstructions: String @join__field(graph: INVENTORY_SUBGRAPH)
  """Календарь доступности единицы на указанный период"""
  calendar(rangeStart: DateTime!, rangeEnd: DateTime!): [CalendarDay!]! @join__field(graph: INVENTORY_SUBGRAPH)
}

"""
Бронирование недвижимости.
Представляет зарезервированный период проживания гостя в единице недвижимости.
"""
type Booking @join__type(graph: BOOKINGS_SUBGRAPH, key: "id") @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) {
  """Уникальный идентификатор бронирования"""
  id: UUID!
  """Организация, владеющая недвижимостью"""
  org: Organization! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Единица недвижимости, которая забронирована"""
  unit: Unit! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Информация о госте"""
  guest: Guest! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Текущий статус бронирования"""
  status: BookingStatus! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Источник бронирования (канал продаж)"""
  source: BookingSource! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Дата и время заезда"""
  checkIn: DateTime! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Дата и время выезда"""
  checkOut: DateTime! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Количество гостей"""
  guestsCount: Int! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Детализация стоимости бронирования"""
  priceBreakdown: PriceBreakdown! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Дополнительные заметки к бронированию"""
  notes: String @join__field(graph: BOOKINGS_SUBGRAPH)
  """Причина отмены (если бронирование отменено)"""
  cancellationReason: String @join__field(graph: BOOKINGS_SUBGRAPH)
  """Дата и время создания бронирования"""
  createdAt: DateTime! @join__field(graph: BOOKINGS_SUBGRAPH)
  """Дата и время последнего обновления"""
  updatedAt: DateTime! @join__field(graph: BOOKINGS_SUBGRAPH)
}

"""
Гость - человек, который бронирует недвижимость.
Содержит контактную информацию и документы гостя.
"""
type Guest @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Уникальный идентификатор гостя"""
  id: UUID!
  """Полное имя гостя"""
  name: String!
  """Email адрес гостя"""
  email: String!
  """Номер телефона гостя (опционально)"""
  phone: String
  """Тип документа, удостоверяющего личность (опционально)"""
  documentType: String
  """Номер документа (опционально)"""
  documentNumber: String
  """Дата и время создания записи о госте"""
  createdAt: DateTime!
  """Дата и время последнего обновления"""
  updatedAt: DateTime!
}

"""
Детализация стоимости бронирования.
Разбивает общую стоимость на составляющие.
"""
type PriceBreakdown @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Базовая стоимость проживания"""
  basePrice: Money!
  """Стоимость уборки (опционально)"""
  cleaningFee: Money
  """Сервисный сбор (опционально)"""
  serviceFee: Money
  """Налоги (опционально)"""
  taxes: Money
  """Общая стоимость бронирования"""
  total: Money!
}

"""
Сервисный сбор.
Дополнительная плата за услуги платформы.
"""
type ServiceFee @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Тип сервисного сбора"""
  type: String!
  """Сумма сбора"""
  amount: Money!
  """Описание сбора (опционально)"""
  description: String
}

"""Соединение бронирований с пагинацией."""
type BookingConnection @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Список бронирований с курсорами"""
  edges: [BookingEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
  """Общее количество бронирований (опционально)"""
  totalCount: Int
}

"""Элемент списка бронирований для пагинации."""
type BookingEdge @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Бронирование"""
  node: Booking!
  """Курсор для пагинации"""
  cursor: String!
}

"""Пользователь системы (ссылка на identity-subgraph)."""
type User @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH, key: "id") @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Уникальный идентификатор пользователя"""
  id: UUID!
  """Email адрес пользователя (уникальный)"""
  email: String! @join__field(graph: IDENTITY_SUBGRAPH)
  """Полное имя пользователя (опционально)"""
  name: String @join__field(graph: IDENTITY_SUBGRAPH)
  """Номер телефона"""
  phoneNumber: String @join__field(graph: IDENTITY_SUBGRAPH)
  """Email подтвержден"""
  emailVerified: Boolean! @join__field(graph: IDENTITY_SUBGRAPH)
  """Статус пользователя"""
  status: UserStatus! @join__field(graph: IDENTITY_SUBGRAPH)
  """Заблокирован ли пользователь"""
  isLocked: Boolean! @join__field(graph: IDENTITY_SUBGRAPH)
  """Дата последнего входа"""
  lastLoginAt: DateTime @join__field(graph: IDENTITY_SUBGRAPH)
  """Дата и время создания аккаунта"""
  createdAt: DateTime! @join__field(graph: IDENTITY_SUBGRAPH)
  """Дата и время последнего обновления"""
  updatedAt: DateTime! @join__field(graph: IDENTITY_SUBGRAPH)
  """Список членств пользователя"""
  memberships: [Membership!]! @join__field(graph: IDENTITY_SUBGRAPH)
}

"""Связь квартиры с предпочтительным уборщиком."""
type CleanerPreference @join__type(graph: CLEANING_SUBGRAPH) {
  """ID связи"""
  id: UUID!
  """Уборщик"""
  cleaner: Cleaner!
  """Дата добавления"""
  createdAt: DateTime!
}

"""
Уборщик - сотрудник, выполняющий уборку.
Может быть INTERNAL (сотрудник с User) или EXTERNAL (подрядчик без User).
"""
type Cleaner @join__type(graph: CLEANING_SUBGRAPH, key: "id") @join__type(graph: OPS_SUBGRAPH) {
  """Уникальный идентификатор уборщика"""
  id: UUID!
  """Тип уборщика"""
  type: CleanerType! @join__field(graph: CLEANING_SUBGRAPH)
  """Пользователь системы (только для INTERNAL)"""
  user: User @join__field(graph: CLEANING_SUBGRAPH)
  """Организация"""
  org: Organization! @join__field(graph: CLEANING_SUBGRAPH)
  """Имя"""
  firstName: String! @join__field(graph: CLEANING_SUBGRAPH)
  """Фамилия"""
  lastName: String! @join__field(graph: CLEANING_SUBGRAPH)
  """Телефон"""
  phone: String @join__field(graph: CLEANING_SUBGRAPH)
  """Email"""
  email: String @join__field(graph: CLEANING_SUBGRAPH)
  """Telegram username (без @)"""
  telegramUsername: String @join__field(graph: CLEANING_SUBGRAPH)
  """Рейтинг уборщика"""
  rating: Float @join__field(graph: CLEANING_SUBGRAPH)
  """Активен ли уборщик"""
  isActive: Boolean! @join__field(graph: CLEANING_SUBGRAPH)
  """Дата деактивации (soft delete)"""
  deletedAt: DateTime @join__field(graph: CLEANING_SUBGRAPH)
  """Дата создания"""
  createdAt: DateTime! @join__field(graph: CLEANING_SUBGRAPH)
  """Дата обновления"""
  updatedAt: DateTime! @join__field(graph: CLEANING_SUBGRAPH)
  """Выполненные уборки"""
  cleanings: [Cleaning!]! @join__field(graph: CLEANING_SUBGRAPH)
  """Квартиры, где уборщик предпочтителен"""
  preferredUnits: [UnitPreference!]! @join__field(graph: CLEANING_SUBGRAPH)
}

"""Связь уборщика с предпочтительной квартирой."""
type UnitPreference @join__type(graph: CLEANING_SUBGRAPH) {
  """ID связи"""
  id: UUID!
  """Квартира"""
  unit: Unit!
  """Дата добавления"""
  createdAt: DateTime!
}

"""
Шаблон уборки для квартиры.
Содержит описание и чеклист для выполнения уборки.
"""
type CleaningTemplate @join__type(graph: CLEANING_SUBGRAPH, key: "id") {
  """Уникальный идентификатор шаблона"""
  id: UUID!
  """Единица недвижимости"""
  unit: Unit!
  """Название шаблона"""
  name: String!
  """Текстовое описание"""
  description: String
  """Требуется ли смена белья"""
  requiresLinenChange: Boolean!
  """Расчетная продолжительность в минутах"""
  estimatedDuration: Int
  """Чек-боксы для проверки"""
  checklistItems: [CleaningTemplateCheckbox!]!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Чек-бокс в шаблоне уборки."""
type CleaningTemplateCheckbox @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор чек-бокса"""
  id: UUID!
  """Текст пункта"""
  label: String!
  """Порядок отображения"""
  order: Int!
  """Обязателен ли пункт"""
  isRequired: Boolean!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""
Уборка - процесс очистки квартиры.
Обязательно привязана к объекту недвижимости.
Опционально может быть привязана к бронированию и задаче.
"""
type Cleaning @join__type(graph: CLEANING_SUBGRAPH, key: "id") {
  """Уникальный идентификатор уборки"""
  id: UUID!
  """Организация"""
  org: Organization!
  """Уборщик (опционально - может быть не назначен)"""
  cleaner: Cleaner
  """Единица недвижимости (обязательно)"""
  unit: Unit!
  """Бронирование (опционально)"""
  booking: Booking
  """Связанная задача (опционально)"""
  taskId: UUID
  """Статус уборки"""
  status: CleaningStatus!
  """Запланированное время"""
  scheduledAt: DateTime!
  """Время начала"""
  startedAt: DateTime
  """Время завершения"""
  completedAt: DateTime
  """Сложность уборки, выставленная после обследования (0-5)"""
  assessedDifficulty: CleaningDifficulty
  """Дата выставления сложности"""
  assessedAt: DateTime
  """Заметки"""
  notes: String
  """Требуется ли смена белья"""
  requiresLinenChange: Boolean!
  """Чеклист уборки"""
  checklistItems: [CleaningChecklist!]!
  """Ревью менеджеров"""
  reviews: [CleaningReview!]!
  """Документы уборки (приемка и сдача)"""
  documents: [CleaningDocument!]!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Пункт чеклиста уборки."""
type CleaningChecklist @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор пункта"""
  id: UUID!
  """Текст пункта"""
  label: String!
  """Отмечен ли пункт"""
  isChecked: Boolean!
  """Порядок отображения"""
  order: Int!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""
Документ уборки.
Два типа: приемка квартиры перед уборкой и сдача после уборки.
По первому возвращается залог гостю.
"""
type CleaningDocument @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор документа"""
  id: UUID!
  """Уборка"""
  cleaning: Cleaning!
  """Тип документа"""
  type: CleaningDocumentType!
  """Заметки к документу"""
  notes: String
  """Фотографии"""
  photos: [CleaningDocumentPhoto!]!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Фотография в документе уборки."""
type CleaningDocumentPhoto @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор фото"""
  id: UUID!
  """URL фотографии"""
  url: String!
  """Описание фото"""
  caption: String
  """Порядок отображения"""
  order: Int!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Соединение уборщиков с пагинацией."""
type CleanerConnection @join__type(graph: CLEANING_SUBGRAPH) {
  """Список уборщиков с курсорами"""
  edges: [CleanerEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
}

"""Элемент списка уборщиков для пагинации."""
type CleanerEdge @join__type(graph: CLEANING_SUBGRAPH) {
  """Уборщик"""
  node: Cleaner!
  """Курсор для пагинации"""
  cursor: String!
}

"""Соединение уборок с пагинацией."""
type CleaningConnection @join__type(graph: CLEANING_SUBGRAPH) {
  """Список уборок с курсорами"""
  edges: [CleaningEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
}

"""Элемент списка уборок для пагинации."""
type CleaningEdge @join__type(graph: CLEANING_SUBGRAPH) {
  """Уборка"""
  node: Cleaning!
  """Курсор для пагинации"""
  cursor: String!
}

"""Ревью уборки менеджером"""
type CleaningReview @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор ревью"""
  id: UUID!
  """ID уборки"""
  cleaningId: UUID!
  """Менеджер, утвердивший уборку"""
  managerId: UUID!
  """Статус ревью"""
  status: CleaningReviewStatus!
  """Комментарий менеджера"""
  comment: String
  """Дата создания"""
  createdAt: DateTime!
}

"""Чек-лист для уборки."""
type Checklist @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор чек-листа"""
  id: UUID!
  """Название чек-листа"""
  name: String!
  """Требования (JSON)"""
  requirements: JSON!
  """Требуется ли фото по каждому пункту"""
  requirePhotoPerItem: Boolean!
  """Активен ли чек-лист (только один активный на юнит)"""
  isActive: Boolean!
  """Пункты чек-листа"""
  items: [ChecklistItem!]!
  """Квартира (опционально)"""
  unit: Unit
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Пункт чек-листа."""
type ChecklistItem @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор пункта"""
  id: UUID!
  """Порядок отображения"""
  order: Int!
  """Название пункта"""
  title: String!
  """Описание пункта"""
  description: String
  """Требуется ли фото для этого пункта"""
  requiresPhoto: Boolean!
  """Эталонные фото (шаблон)"""
  templateMedia: [ChecklistItemTemplateMedia!]!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Пример фото для пункта шаблона."""
type ChecklistItemTemplateMedia @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор"""
  id: UUID!
  """Ключ объекта в хранилище"""
  objectKey: String!
  """URL фото"""
  url: String!
  """MIME тип"""
  mimeType: String
  """Дата создания"""
  createdAt: DateTime!
  """Подпись к фото"""
  caption: String
  """Порядок отображения"""
  order: Int!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Шаблон чек-листа (версионируемый)."""
type ChecklistTemplate @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор шаблона"""
  id: UUID!
  """ID юнита"""
  unitId: UUID!
  """Юнит"""
  unit: Unit!
  """Версия шаблона"""
  version: Int!
  """Пункты шаблона"""
  items: [ChecklistItemTemplate!]!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Пункт шаблона чек-листа."""
type ChecklistItemTemplate @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор"""
  id: UUID!
  """Стабильный ключ"""
  key: String!
  """Название пункта"""
  title: String!
  """Описание пункта"""
  description: String
  """Тип пункта"""
  type: ItemType!
  """Обязателен ли пункт"""
  required: Boolean!
  """Требуется ли фото"""
  requiresPhoto: Boolean!
  """Минимальное количество фото"""
  photoMin: Int
  """Порядок отображения"""
  order: Int!
  """Примеры фото для пункта"""
  exampleMedia: [ChecklistItemTemplateMedia!]!
}

"""Инстанс чек-листа (для конкретной стадии)."""
type ChecklistInstance @join__type(graph: CLEANING_SUBGRAPH, key: "id") {
  """Уникальный идентификатор инстанса"""
  id: UUID!
  """ID юнита"""
  unitId: UUID!
  """Юнит"""
  unit: Unit!
  """ID уборки"""
  cleaningId: UUID
  """Уборка"""
  cleaning: Cleaning
  """Стадия чек-листа"""
  stage: ChecklistStage!
  """Статус чек-листа"""
  status: ChecklistStatus!
  """ID шаблона"""
  templateId: UUID!
  """Шаблон"""
  template: ChecklistTemplate!
  """Версия шаблона"""
  templateVersion: Int!
  """ID родительского инстанса (для промоута)"""
  parentInstanceId: UUID
  """Родительский инстанс"""
  parentInstance: ChecklistInstance
  """Пункты чек-листа (полная копия)"""
  items: [ChecklistInstanceItem!]!
  """Ответы на пункты"""
  answers: [ChecklistAnswer!]!
  """Аттачменты (фото)"""
  attachments: [ChecklistAttachment!]!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Пункт инстанса чек-листа."""
type ChecklistInstanceItem @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор"""
  id: UUID!
  """Ключ пункта"""
  key: String!
  """Название пункта"""
  title: String!
  """Описание пункта"""
  description: String
  """Тип пункта"""
  type: ItemType!
  """Обязателен ли пункт"""
  required: Boolean!
  """Требуется ли фото"""
  requiresPhoto: Boolean!
  """Минимальное количество фото"""
  photoMin: Int
  """Порядок отображения"""
  order: Int!
  """Примеры фото из шаблона"""
  exampleMedia: [ChecklistItemTemplateMedia!]!
}

"""Ответ на пункт чек-листа."""
type ChecklistAnswer @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор"""
  id: UUID!
  """Ключ пункта"""
  itemKey: String!
  """Значение ответа (JSON)"""
  value: JSON
  """Заметка"""
  note: String
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Аттачмент (фото) к пункту чек-листа."""
type ChecklistAttachment @join__type(graph: CLEANING_SUBGRAPH) {
  """Уникальный идентификатор"""
  id: UUID!
  """Ключ пункта"""
  itemKey: String!
  """URL фото (MinIO)"""
  url: String!
  """Подпись к фото"""
  caption: String
  """Дата создания"""
  createdAt: DateTime!
}

"""Presigned URL для прямой загрузки файла."""
type PresignedUploadUrl @join__type(graph: CLEANING_SUBGRAPH) {
  """Presigned PUT URL для загрузки"""
  url: String!
  """Ключ объекта в хранилище"""
  objectKey: String!
  """Время жизни URL в секундах"""
  expiresIn: Int!
  """MIME тип файла"""
  mimeType: String
}

"""Пользователь IAM с расширенными возможностями"""
type IAMUser @join__type(graph: IAM_SUBGRAPH) {
  """Идентификатор пользователя"""
  id: UUID!
  """Email адрес"""
  email: String!
  """Имя пользователя"""
  name: String
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
  """Статус аккаунта пользователя"""
  status: UserStatus!
  """Последний вход в систему"""
  lastLoginAt: DateTime
  """Количество неудачных попыток входа"""
  failedLoginAttempts: Int!
  """Заблокирован ли аккаунт"""
  isLocked: Boolean!
  """Дата блокировки аккаунта"""
  lockedAt: DateTime
  """Причина блокировки"""
  lockReason: String
  """Двухфакторная аутентификация включена"""
  twoFactorEnabled: Boolean!
  """Членства пользователя в организациях"""
  memberships: [IAMMembership!]!
  """Разрешения пользователя"""
  permissions: [Permission!]!
  """Активные сессии"""
  activeSessions: [UserSession!]!
  """История активности"""
  activityLog: [ActivityLog!]!
}

"""Членство пользователя в организации"""
type IAMMembership @join__type(graph: IAM_SUBGRAPH) {
  """Уникальный идентификатор членства"""
  id: UUID!
  """Идентификатор организации"""
  orgId: UUID!
  """Роль пользователя"""
  role: Role!
  """Дата создания членства"""
  createdAt: DateTime!
  """Дата обновления членства"""
  updatedAt: DateTime!
  """Краткая информация об организации"""
  organization: IAMOrganizationSummary
}

"""Краткая информация об организации"""
type IAMOrganizationSummary @join__type(graph: IAM_SUBGRAPH) {
  """Идентификатор организации"""
  id: UUID!
  """Название организации"""
  name: String!
}

"""Разрешения в системе"""
type Permission @join__type(graph: IAM_SUBGRAPH) {
  """Идентификатор разрешения"""
  id: UUID!
  """Название разрешения"""
  name: String!
  """Описание разрешения"""
  description: String
  """Категория разрешения"""
  category: String!
  """Действие"""
  action: String!
  """Ресурс"""
  resource: String!
}

"""Сессия пользователя"""
type UserSession @join__type(graph: IAM_SUBGRAPH, key: "id") {
  """Идентификатор сессии"""
  id: UUID!
  """IP адрес"""
  ipAddress: String
  """User Agent"""
  userAgent: String
  """Дата создания сессии"""
  createdAt: DateTime!
  """Дата последней активности"""
  lastActivityAt: DateTime!
  """Активна ли сессия"""
  isActive: Boolean!
  """Тип устройства"""
  deviceType: String
  """Местоположение"""
  location: String
}

"""Лог активности пользователя"""
type ActivityLog @join__type(graph: IAM_SUBGRAPH) {
  """Идентификатор записи"""
  id: UUID!
  """Тип действия"""
  action: String!
  """Описание действия"""
  description: String!
  """IP адрес"""
  ipAddress: String
  """User Agent"""
  userAgent: String
  """Метаданные действия"""
  metadata: JSON
  """Дата действия"""
  createdAt: DateTime!
}

"""Статистика пользователей"""
type UserStats @join__type(graph: IAM_SUBGRAPH) {
  """Общее количество пользователей"""
  totalUsers: Int!
  """Активные пользователи"""
  activeUsers: Int!
  """Заблокированные пользователи"""
  lockedUsers: Int!
  """Пользователи онлайн"""
  onlineUsers: Int!
  """Новые пользователи за период"""
  newUsers: Int!
  """Пользователи по ролям"""
  usersByRole: [RoleStats!]!
}

"""Статистика по ролям"""
type RoleStats @join__type(graph: IAM_SUBGRAPH) {
  """Роль"""
  role: Role!
  """Количество пользователей"""
  count: Int!
}

"""Соединение пользователей"""
type IAMUserConnection @join__type(graph: IAM_SUBGRAPH) {
  """Список пользователей"""
  edges: [IAMUserEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
}

"""Граница пользователя"""
type IAMUserEdge @join__type(graph: IAM_SUBGRAPH) {
  """Пользователь"""
  node: IAMUser!
  """Курсор"""
  cursor: String!
}

"""
Членство пользователя в организации.
Связывает пользователя с организацией и определяет его роль.
"""
type Membership @join__type(graph: IDENTITY_SUBGRAPH, key: "id") {
  """Уникальный идентификатор членства"""
  id: UUID!
  """Пользователь, который является членом организации"""
  user: User!
  """Организация"""
  organization: Organization!
  """Роль пользователя в организации"""
  role: Role!
  """Дата и время добавления в организацию"""
  createdAt: DateTime!
  """Дата и время последнего обновления роли"""
  updatedAt: DateTime!
}

"""Элемент списка пользователей для пагинации."""
type UserEdge @join__type(graph: IDENTITY_SUBGRAPH) {
  """Пользователь"""
  node: User!
  """Курсор для пагинации"""
  cursor: String!
}

"""Соединение пользователей с пагинацией."""
type UserConnection @join__type(graph: IDENTITY_SUBGRAPH) {
  """Список пользователей с курсорами"""
  edges: [UserEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
}

"""Элемент списка организаций для пагинации."""
type OrganizationEdge @join__type(graph: IDENTITY_SUBGRAPH) {
  """Организация"""
  node: Organization!
  """Курсор для пагинации"""
  cursor: String!
}

"""Соединение организаций с пагинацией."""
type OrganizationConnection @join__type(graph: IDENTITY_SUBGRAPH) {
  """Список организаций с курсорами"""
  edges: [OrganizationEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
}

"""
Результат аутентификации.
Содержит пользователя и токены доступа.
"""
type AuthPayload @join__type(graph: IDENTITY_SUBGRAPH) {
  """Пользователь"""
  user: User!
  """JWT токен доступа"""
  accessToken: String!
  """JWT токен обновления"""
  refreshToken: String!
  """Время жизни токена в секундах"""
  expiresIn: Int!
}

"""
День в календаре единицы недвижимости.
Представляет статус доступности единицы на конкретную дату.
"""
type CalendarDay @join__type(graph: INVENTORY_SUBGRAPH) {
  """Дата в календаре"""
  date: DateTime!
  """Статус доступности на эту дату"""
  status: AvailabilityStatus!
  """ID бронирования, если единица забронирована (опционально)"""
  bookingId: UUID
  """Дополнительная заметка о статусе (опционально)"""
  note: String
}

"""
Юридический документ.
Представляет договор, соглашение или другой юридический документ, связанный с бронированием.
"""
type Document @join__type(graph: LEGAL_SUBGRAPH, key: "id") {
  """Уникальный идентификатор документа"""
  id: UUID!
  """Тип документа (например, "rental_agreement", "deposit_contract")"""
  type: String!
  """Название шаблона документа"""
  template: String!
  """Содержимое документа в текстовом формате"""
  content: String!
  """URL для скачивания документа (опционально)"""
  url: String
  """Дата и время подписания документа (опционально)"""
  signedAt: DateTime
  """Дата и время создания документа"""
  createdAt: DateTime!
  """Дата и время последнего обновления"""
  updatedAt: DateTime!
  """Дополнительные метаданные документа в формате JSON (опционально)"""
  meta: JSON
  """Связанное бронирование (опционально)"""
  booking: Booking
}

"""
Транзакция с депозитом/залогом.
Запись о действии с залогом по бронированию (блокировка, списание, возврат).
"""
type DepositTransaction @join__type(graph: LEGAL_SUBGRAPH) {
  """Уникальный идентификатор транзакции"""
  id: UUID!
  """Бронирование, по которому производится транзакция"""
  booking: Booking!
  """Действие с депозитом"""
  action: DepositAction!
  """Сумма транзакции"""
  amount: Money!
  """Статус транзакции"""
  status: TransactionStatus!
  """Идентификатор транзакции в платежной системе (опционально)"""
  transactionId: String
  """Дополнительные заметки к транзакции (опционально)"""
  notes: String
  """Дата и время создания транзакции"""
  createdAt: DateTime!
  """Дата и время последнего обновления"""
  updatedAt: DateTime!
}

"""
Объявление о сдаче недвижимости в аренду.
Представляет единицу недвижимости на конкретном канале продаж с настройками ценообразования.
"""
type Listing @join__type(graph: LISTINGS_SUBGRAPH, key: "id") {
  """Уникальный идентификатор объявления"""
  id: UUID!
  """Единица недвижимости, которая сдается"""
  unit: Unit!
  """Текущий статус объявления"""
  status: ListingStatus!
  """Канал продаж, на котором размещено объявление"""
  channel: Channel!
  """Базовая цена за ночь"""
  basePrice: Money!
  """Минимальное количество ночей для бронирования"""
  minNights: Int!
  """Максимальное количество ночей для бронирования (опционально)"""
  maxNights: Int
  """Внешний ID объявления на платформе (например, Airbnb listing ID)"""
  externalId: String
  """Дата и время последней синхронизации с внешней платформой"""
  lastSyncAt: DateTime
  """Список правил скидок для данного объявления"""
  discounts: [DiscountRule!]!
}

"""
Правило скидки для объявления.
Определяет условия предоставления скидки при бронировании.
"""
type DiscountRule @join__type(graph: LISTINGS_SUBGRAPH) {
  """Уникальный идентификатор правила скидки"""
  id: UUID!
  """Название правила скидки (например, "Скидка за неделю")"""
  name: String!
  """Процент скидки (от 1 до 100)"""
  percentOff: Int!
  """Минимальное количество ночей для применения скидки (опционально)"""
  minNights: Int
}

"""Элемент списка объявлений для пагинации."""
type ListingEdge @join__type(graph: LISTINGS_SUBGRAPH) {
  """Объявление"""
  node: Listing!
  """Курсор для пагинации"""
  cursor: String!
}

"""Соединение объявлений с пагинацией."""
type ListingConnection @join__type(graph: LISTINGS_SUBGRAPH) {
  """Список объявлений с курсорами"""
  edges: [ListingEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
}

"""Уведомление - сообщение для пользователя."""
type Notification @join__type(graph: NOTIFICATIONS_SUBGRAPH, key: "id") {
  """Уникальный идентификатор уведомления"""
  id: UUID!
  """Организация (опционально)"""
  org: Organization
  """Пользователь-получатель"""
  user: User
  """Тип события"""
  eventType: EventType!
  """Приоритет"""
  priority: Priority!
  """Статус"""
  status: NotificationStatus!
  """Заголовок"""
  title: String!
  """Текст сообщения"""
  message: String!
  """Дополнительные данные (JSON)"""
  metadata: String
  """URL для действия"""
  actionUrl: String
  """Текст кнопки действия"""
  actionText: String
  """Запланировано на"""
  scheduledAt: DateTime
  """Отправлено в"""
  sentAt: DateTime
  """Доставлено в"""
  deliveredAt: DateTime
  """Прочитано в"""
  readAt: DateTime
  """Статусы доставки по каналам"""
  deliveryStatuses: [DeliveryStatus!]!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Статус доставки по конкретному каналу."""
type DeliveryStatus @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """ID записи доставки"""
  id: UUID!
  """Канал доставки"""
  channel: NotificationChannel!
  """Тип получателя"""
  recipientType: RecipientType!
  """ID получателя"""
  recipientId: String!
  """Статус доставки"""
  status: DeliveryStatusEnum!
  """ID в системе провайдера"""
  externalId: String
  """Доставлено в"""
  deliveredAt: DateTime
  """Ошибка (если есть)"""
  error: String
}

"""Настройки уведомлений пользователя."""
type UserNotificationSettings @join__type(graph: NOTIFICATIONS_SUBGRAPH, key: "userId") {
  """ID пользователя"""
  userId: UUID!
  """Telegram Chat ID"""
  telegramChatId: String
  """Email"""
  email: String
  """Телефон"""
  phone: String
  """Включены ли уведомления"""
  enabled: Boolean!
  """Включенные каналы"""
  enabledChannels: [NotificationChannel!]!
  """Типы событий, на которые подписан"""
  subscribedEvents: [EventType!]!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Шаблон уведомления."""
type NotificationTemplate @join__type(graph: NOTIFICATIONS_SUBGRAPH, key: "id") {
  """ID шаблона"""
  id: UUID!
  """Тип события"""
  eventType: EventType!
  """Название шаблона"""
  name: String!
  """Заголовок (с переменными)"""
  titleTemplate: String!
  """Текст сообщения (с переменными)"""
  messageTemplate: String!
  """Каналы по умолчанию"""
  defaultChannels: [NotificationChannel!]!
  """Приоритет по умолчанию"""
  defaultPriority: Priority!
  """Дата создания"""
  createdAt: DateTime!
  """Дата обновления"""
  updatedAt: DateTime!
}

"""Соединение уведомлений с пагинацией."""
type NotificationConnection @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Список уведомлений с курсорами"""
  edges: [NotificationEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
}

"""Элемент списка уведомлений для пагинации."""
type NotificationEdge @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Уведомление"""
  node: Notification!
  """Курсор для пагинации"""
  cursor: String!
}

"""Подписки на уведомления в реальном времени."""
type Subscription @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Подписаться на уведомления пользователя"""
  notificationReceived(userId: UUID!): Notification!
  """Подписаться на уведомления организации"""
  organizationNotifications(orgId: UUID!): Notification!
}

"""
Поставщик услуг.
Компания или физическое лицо, предоставляющее услуги по обслуживанию недвижимости.
"""
type ServiceProvider @join__type(graph: OPS_SUBGRAPH, key: "id") {
  """Уникальный идентификатор поставщика услуг"""
  id: UUID!
  """Название поставщика услуг"""
  name: String!
  """Типы услуг, которые предоставляет поставщик"""
  serviceTypes: [TaskType!]!
  """Рейтинг поставщика (от 1.0 до 5.0, опционально)"""
  rating: Float
  """Контактная информация (телефон, email)"""
  contact: String
  """Дата и время добавления поставщика"""
  createdAt: DateTime!
  """Дата и время последнего обновления"""
  updatedAt: DateTime!
}

"""
Операционная задача.
Представляет задачу, которую необходимо выполнить для обслуживания недвижимости.
"""
type Task @join__type(graph: OPS_SUBGRAPH, key: "id") {
  """Уникальный идентификатор задачи"""
  id: UUID!
  """Организация, для которой создана задача"""
  org: Organization!
  """Единица недвижимости, к которой относится задача (опционально)"""
  unit: Unit
  """Бронирование, связанное с задачей (опционально)"""
  booking: Booking
  """Тип задачи"""
  type: TaskType!
  """Текущий статус задачи"""
  status: TaskStatus!
  """Дата и время, к которому должна быть выполнена задача (опционально)"""
  dueAt: DateTime
  """Поставщик услуг, назначенный на задачу (опционально)"""
  assignedTo: ServiceProvider
  """
  Уборщик, назначенный на задачу уборки (опционально, только для CLEANING)
  """
  assignedCleaner: Cleaner
  """Чек-лист для выполнения задачи"""
  checklist: [String!]!
  """Дата и время создания задачи"""
  createdAt: DateTime!
  """Дата и время последнего обновления"""
  updatedAt: DateTime!
  """Дополнительные заметки к задаче (опционально)"""
  note: String
  """Связанные уборки (только для задач типа CLEANING)"""
  cleanings: [Cleaning!]! @additionalField
}

"""Элемент списка задач для пагинации."""
type TaskEdge @join__type(graph: OPS_SUBGRAPH) {
  """Задача"""
  node: Task!
  """Курсор для пагинации"""
  cursor: String!
}

"""Соединение задач с пагинацией."""
type TaskConnection @join__type(graph: OPS_SUBGRAPH) {
  """Список задач с курсорами"""
  edges: [TaskEdge!]!
  """Информация о пагинации"""
  pageInfo: PageInfo!
  """Общее количество задач (опционально)"""
  totalCount: Int
}

"""Правила расчёта стоимости для юнита/организации."""
type CleaningPricingRule @join__type(graph: PRICING_SUBGRAPH) {
  id: UUID!
  orgId: UUID!
  unitId: UUID
  mode: CleaningCoeffMode!
  baseCleaningPrice: Money!
  gradeStep: Float!
  difficultyStep: Float!
  increasedDifficultyDelta: Float!
  extras: JSON
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""Квота/калькуляция стоимости уборки."""
type CleaningCostQuote @join__type(graph: PRICING_SUBGRAPH) {
  unitId: UUID!
  grade: UnitGrade!
  difficulty: CleaningDifficulty!
  mode: CleaningCoeffMode!
  base: Money!
  gradeCoefficient: Float!
  difficultyCoefficient: Float!
  total: Money!
}

"""
Действия с депозитом/залогом.
Используется для управления залогами при бронировании.
"""
enum DepositAction @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) {
  """Заблокировать средства на карте гостя"""
  HOLD @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Разблокировать заблокированные средства"""
  RELEASE @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Списать средства с карты гостя"""
  CHARGE @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Подтвердить списание (окончательно)"""
  CAPTURE @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Вернуть средства гостю"""
  REFUND @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
}

"""Статус транзакции в системе."""
enum TransactionStatus @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) {
  """Транзакция в процессе обработки"""
  PENDING @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Транзакция успешно завершена"""
  COMPLETED @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Транзакция не удалась"""
  FAILED @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
}

"""
Каналы продаж для бронирований.
Определяет источник бронирования.
"""
enum Channel @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) {
  """Прямое бронирование через сайт/приложение"""
  DIRECT @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Бронирование через Airbnb"""
  AIRBNB @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Бронирование через Booking.com"""
  BOOKING_COM @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Бронирование через Avito"""
  AVITO @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
  """Другие каналы продаж"""
  OTHER @join__enumValue(graph: BILLING_SUBGRAPH) @join__enumValue(graph: BOOKINGS_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: LEGAL_SUBGRAPH) @join__enumValue(graph: LISTINGS_SUBGRAPH) @join__enumValue(graph: OPS_SUBGRAPH)
}

"""
Статус счета.
Определяет текущее состояние выставленного счета.
"""
enum InvoiceStatus @join__type(graph: BILLING_SUBGRAPH) {
  """Счет выставлен, ожидает оплаты"""
  OPEN @join__enumValue(graph: BILLING_SUBGRAPH)
  """Счет полностью оплачен"""
  PAID @join__enumValue(graph: BILLING_SUBGRAPH)
  """Счет отменен"""
  CANCELED @join__enumValue(graph: BILLING_SUBGRAPH)
}

"""
Статус платежа.
Определяет результат обработки платежа.
"""
enum PaymentStatus @join__type(graph: BILLING_SUBGRAPH) {
  """Платеж в процессе обработки"""
  PENDING @join__enumValue(graph: BILLING_SUBGRAPH)
  """Платеж успешно обработан"""
  SUCCEEDED @join__enumValue(graph: BILLING_SUBGRAPH)
  """Платеж не удался"""
  FAILED @join__enumValue(graph: BILLING_SUBGRAPH)
  """Платеж отменен"""
  CANCELED @join__enumValue(graph: BILLING_SUBGRAPH)
}

"""
Способ оплаты.
Определяет метод, которым был произведен платеж.
"""
enum PaymentMethod @join__type(graph: BILLING_SUBGRAPH) {
  """Оплата банковской картой"""
  CARD @join__enumValue(graph: BILLING_SUBGRAPH)
  """Оплата наличными"""
  CASH @join__enumValue(graph: BILLING_SUBGRAPH)
  """Банковский перевод"""
  TRANSFER @join__enumValue(graph: BILLING_SUBGRAPH)
  """Другие способы оплаты"""
  OTHER @join__enumValue(graph: BILLING_SUBGRAPH)
}

"""
Статус бронирования.
Определяет текущее состояние бронирования в жизненном цикле.
"""
enum BookingStatus @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Ожидает подтверждения"""
  PENDING @join__enumValue(graph: BOOKINGS_SUBGRAPH)
  """Подтверждено и активно"""
  CONFIRMED @join__enumValue(graph: BOOKINGS_SUBGRAPH)
  """Отменено"""
  CANCELLED @join__enumValue(graph: BOOKINGS_SUBGRAPH)
  """Завершено (гость выехал)"""
  COMPLETED @join__enumValue(graph: BOOKINGS_SUBGRAPH)
  """Гость не явился (no-show)"""
  NO_SHOW @join__enumValue(graph: BOOKINGS_SUBGRAPH)
}

"""
Источник бронирования.
Определяет канал, через который было создано бронирование.
"""
enum BookingSource @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Прямое бронирование через сайт/приложение"""
  DIRECT @join__enumValue(graph: BOOKINGS_SUBGRAPH)
  """Бронирование через Airbnb"""
  AIRBNB @join__enumValue(graph: BOOKINGS_SUBGRAPH)
  """Бронирование через Booking.com"""
  BOOKING_COM @join__enumValue(graph: BOOKINGS_SUBGRAPH)
  """Бронирование через Avito"""
  AVITO @join__enumValue(graph: BOOKINGS_SUBGRAPH)
  """Другие каналы продаж"""
  OTHER @join__enumValue(graph: BOOKINGS_SUBGRAPH)
}

"""Статус уборки."""
enum CleaningStatus @join__type(graph: CLEANING_SUBGRAPH) {
  """Запланирована"""
  SCHEDULED @join__enumValue(graph: CLEANING_SUBGRAPH)
  """В процессе выполнения"""
  IN_PROGRESS @join__enumValue(graph: CLEANING_SUBGRAPH)
  """Завершена"""
  COMPLETED @join__enumValue(graph: CLEANING_SUBGRAPH)
  """Проверена менеджером"""
  APPROVED @join__enumValue(graph: CLEANING_SUBGRAPH)
  """Отменена"""
  CANCELLED @join__enumValue(graph: CLEANING_SUBGRAPH)
}

enum ChecklistStage @join__type(graph: CLEANING_SUBGRAPH) {
  PRE_CLEANING @join__enumValue(graph: CLEANING_SUBGRAPH)
  CLEANING @join__enumValue(graph: CLEANING_SUBGRAPH)
  FINAL_REPORT @join__enumValue(graph: CLEANING_SUBGRAPH)
}

"""Тип уборщика."""
enum CleanerType @join__type(graph: CLEANING_SUBGRAPH) {
  """Сотрудник компании (связан с User)"""
  INTERNAL @join__enumValue(graph: CLEANING_SUBGRAPH)
  """Внешний подрядчик (не связан с User)"""
  EXTERNAL @join__enumValue(graph: CLEANING_SUBGRAPH)
}

"""
Сложность уборки (0-5).
Выставляется уборщиком после обследования (PRE_CLEANING).
"""
enum CleaningDifficulty @join__type(graph: CLEANING_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH) {
  D0 @join__enumValue(graph: CLEANING_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  D1 @join__enumValue(graph: CLEANING_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  D2 @join__enumValue(graph: CLEANING_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  D3 @join__enumValue(graph: CLEANING_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  D4 @join__enumValue(graph: CLEANING_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  D5 @join__enumValue(graph: CLEANING_SUBGRAPH) @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
}

"""Тип документа уборки."""
enum CleaningDocumentType @join__type(graph: CLEANING_SUBGRAPH) {
  """Приемка квартиры перед уборкой"""
  PRE_CLEANING_ACCEPTANCE @join__enumValue(graph: CLEANING_SUBGRAPH)
  """Сдача убранной квартиры"""
  POST_CLEANING_HANDOVER @join__enumValue(graph: CLEANING_SUBGRAPH)
}

"""Статус ревью уборки"""
enum CleaningReviewStatus @join__type(graph: CLEANING_SUBGRAPH) {
  """Уборка подтверждена менеджером"""
  APPROVED @join__enumValue(graph: CLEANING_SUBGRAPH)
}

enum ChecklistStatus @join__type(graph: CLEANING_SUBGRAPH) {
  DRAFT @join__enumValue(graph: CLEANING_SUBGRAPH)
  SUBMITTED @join__enumValue(graph: CLEANING_SUBGRAPH)
  LOCKED @join__enumValue(graph: CLEANING_SUBGRAPH)
}

enum ItemType @join__type(graph: CLEANING_SUBGRAPH) {
  BOOL @join__enumValue(graph: CLEANING_SUBGRAPH)
  NUMBER @join__enumValue(graph: CLEANING_SUBGRAPH)
  TEXT @join__enumValue(graph: CLEANING_SUBGRAPH)
  SELECT @join__enumValue(graph: CLEANING_SUBGRAPH)
  MULTISELECT @join__enumValue(graph: CLEANING_SUBGRAPH)
  PHOTO_ONLY @join__enumValue(graph: CLEANING_SUBGRAPH)
}

"""Статус пользователя"""
enum UserStatus @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) {
  """Активный пользователь"""
  ACTIVE @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
  """Неактивный пользователь"""
  INACTIVE @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
  """Заблокированный пользователь"""
  SUSPENDED @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
  """Удаленный пользователь"""
  DELETED @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
}

"""Роли в организации"""
enum Role @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) {
  """Владелец организации"""
  OWNER @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
  """Менеджер"""
  MANAGER @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
  """Сотрудник"""
  STAFF @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
  """Уборщик"""
  CLEANER @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
  """Оператор"""
  OPERATOR @join__enumValue(graph: IAM_SUBGRAPH) @join__enumValue(graph: IDENTITY_SUBGRAPH)
}

"""Поля для сортировки пользователей"""
enum UserSortField @join__type(graph: IAM_SUBGRAPH) {
  """По имени"""
  NAME @join__enumValue(graph: IAM_SUBGRAPH)
  """По email"""
  EMAIL @join__enumValue(graph: IAM_SUBGRAPH)
  """По дате создания"""
  CREATED_AT @join__enumValue(graph: IAM_SUBGRAPH)
  """По последнему входу"""
  LAST_LOGIN @join__enumValue(graph: IAM_SUBGRAPH)
  """По статусу"""
  STATUS @join__enumValue(graph: IAM_SUBGRAPH)
}

"""Направление сортировки"""
enum SortDirection @join__type(graph: IAM_SUBGRAPH) {
  """По возрастанию"""
  ASC @join__enumValue(graph: IAM_SUBGRAPH)
  """По убыванию"""
  DESC @join__enumValue(graph: IAM_SUBGRAPH)
}

"""Градация юнита по размеру (0-10)."""
enum UnitGrade @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH) {
  GRADE_0 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_1 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_2 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_3 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_4 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_5 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_6 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_7 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_8 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_9 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
  GRADE_10 @join__enumValue(graph: INVENTORY_SUBGRAPH) @join__enumValue(graph: PRICING_SUBGRAPH)
}

"""
Статус доступности единицы недвижимости.
Определяет, можно ли забронировать единицу на конкретную дату.
"""
enum AvailabilityStatus @join__type(graph: INVENTORY_SUBGRAPH) {
  """Доступна для бронирования"""
  AVAILABLE @join__enumValue(graph: INVENTORY_SUBGRAPH)
  """Заблокирована (недоступна для бронирования)"""
  BLOCKED @join__enumValue(graph: INVENTORY_SUBGRAPH)
  """Забронирована"""
  BOOKED @join__enumValue(graph: INVENTORY_SUBGRAPH)
}

"""
Статус объявления.
Определяет видимость и доступность объявления для бронирования.
"""
enum ListingStatus @join__type(graph: LISTINGS_SUBGRAPH) {
  """Черновик - объявление создано, но не опубликовано"""
  DRAFT @join__enumValue(graph: LISTINGS_SUBGRAPH)
  """Опубликовано - объявление активно и доступно для бронирования"""
  PUBLISHED @join__enumValue(graph: LISTINGS_SUBGRAPH)
  """Архивировано - объявление скрыто, но не удалено"""
  ARCHIVED @join__enumValue(graph: LISTINGS_SUBGRAPH)
}

"""Тип события для уведомления."""
enum EventType @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Создано бронирование"""
  BOOKING_CREATED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Бронирование подтверждено"""
  BOOKING_CONFIRMED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Бронирование отменено"""
  BOOKING_CANCELLED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Заселение гостя"""
  BOOKING_CHECKIN @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Выселение гостя"""
  BOOKING_CHECKOUT @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Уборка доступна для самоназначения"""
  CLEANING_AVAILABLE @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Уборщик назначен"""
  CLEANING_ASSIGNED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Уборка начата"""
  CLEANING_STARTED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Уборка завершена"""
  CLEANING_COMPLETED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Уборка ожидает проверки менеджера"""
  CLEANING_READY_FOR_REVIEW @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Уборка отменена"""
  CLEANING_CANCELLED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Приёмка перед уборкой завершена"""
  CLEANING_PRECHECK_COMPLETED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Сложность уборки указана"""
  CLEANING_DIFFICULTY_SET @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  CLEANING_APPROVED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Задача создана"""
  TASK_CREATED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Задача назначена"""
  TASK_ASSIGNED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Статус задачи изменен"""
  TASK_STATUS_CHANGED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Задача завершена"""
  TASK_COMPLETED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Платеж получен"""
  PAYMENT_RECEIVED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Платеж не прошел"""
  PAYMENT_FAILED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Счет создан"""
  INVOICE_CREATED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Счет просрочен"""
  INVOICE_OVERDUE @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Пользователь зарегистрирован"""
  USER_REGISTERED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Вход пользователя"""
  USER_LOGIN @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Системное оповещение"""
  SYSTEM_ALERT @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
}

"""Приоритет уведомления."""
enum Priority @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Низкий приоритет"""
  LOW @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Нормальный приоритет"""
  NORMAL @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Высокий приоритет"""
  HIGH @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Срочно"""
  URGENT @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
}

"""Канал доставки уведомления."""
enum NotificationChannel @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Telegram бот"""
  TELEGRAM @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Email"""
  EMAIL @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """SMS"""
  SMS @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Push уведомления"""
  PUSH @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """WebSocket (real-time)"""
  WEBSOCKET @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Внутри приложения"""
  IN_APP @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
}

"""Статус уведомления."""
enum NotificationStatus @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Создано, ожидает отправки"""
  PENDING @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Запланировано на будущее"""
  SCHEDULED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Отправлено успешно"""
  SENT @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Ошибка при отправке"""
  FAILED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Доставлено получателю"""
  DELIVERED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Прочитано получателем"""
  READ @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Отменено"""
  CANCELLED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
}

"""Тип получателя для доставки."""
enum RecipientType @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """User ID"""
  USER_ID @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Telegram Chat ID"""
  TELEGRAM_CHAT_ID @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Email адрес"""
  EMAIL @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Номер телефона"""
  PHONE @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
}

"""Статус доставки."""
enum DeliveryStatusEnum @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Ожидает отправки"""
  PENDING @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Отправляется"""
  SENDING @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Отправлено"""
  SENT @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Доставлено"""
  DELIVERED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Ошибка доставки"""
  FAILED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
  """Отклонено получателем"""
  BOUNCED @join__enumValue(graph: NOTIFICATIONS_SUBGRAPH)
}

"""
Статус задачи.
Определяет текущее состояние выполнения задачи.
"""
enum TaskStatus @join__type(graph: OPS_SUBGRAPH) {
  """Задача создана, ожидает выполнения"""
  TODO @join__enumValue(graph: OPS_SUBGRAPH)
  """Задача в процессе выполнения"""
  IN_PROGRESS @join__enumValue(graph: OPS_SUBGRAPH)
  """Задача выполнена"""
  DONE @join__enumValue(graph: OPS_SUBGRAPH)
  """Задача отменена"""
  CANCELED @join__enumValue(graph: OPS_SUBGRAPH)
}

"""
Тип задачи.
Определяет категорию и характер выполняемой задачи.
"""
enum TaskType @join__type(graph: OPS_SUBGRAPH) {
  """Уборка помещения"""
  CLEANING @join__enumValue(graph: OPS_SUBGRAPH)
  """Заселение гостя"""
  CHECKIN @join__enumValue(graph: OPS_SUBGRAPH)
  """Выселение гостя"""
  CHECKOUT @join__enumValue(graph: OPS_SUBGRAPH)
  """Техническое обслуживание"""
  MAINTENANCE @join__enumValue(graph: OPS_SUBGRAPH)
  """Инвентаризация"""
  INVENTORY @join__enumValue(graph: OPS_SUBGRAPH)
}

"""Режим коэффициентов ценообразования."""
enum CleaningCoeffMode @join__type(graph: PRICING_SUBGRAPH) {
  BASIC @join__enumValue(graph: PRICING_SUBGRAPH)
  INCREASED @join__enumValue(graph: PRICING_SUBGRAPH)
}

"""Настройки для AI-адаптера."""
input AIAdapterConfig @join__type(graph: AI_SUBGRAPH) {
  """Тип адаптера (openai, anthropic)"""
  type: String!
  """API ключ для адаптера"""
  apiKey: String!
  """Модель для использования (опционально)"""
  model: String
}

"""
Входные данные для денежной суммы.
Используется в мутациях для создания/обновления денежных значений.
"""
input MoneyInput @join__type(graph: BILLING_SUBGRAPH) @join__type(graph: BOOKINGS_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) @join__type(graph: INVENTORY_SUBGRAPH) @join__type(graph: LEGAL_SUBGRAPH) @join__type(graph: LISTINGS_SUBGRAPH) @join__type(graph: OPS_SUBGRAPH) @join__type(graph: PRICING_SUBGRAPH) {
  """Сумма в копейках/центах"""
  amount: Int!
  """Код валюты в формате ISO 4217"""
  currency: String!
}

"""Входные данные для позиции в счете."""
input InvoiceItemInput @join__type(graph: BILLING_SUBGRAPH) {
  """Название позиции"""
  name: String!
  """Количество единиц"""
  qty: Int!
  """Цена за единицу"""
  price: MoneyInput!
}

"""Входные данные для создания счета."""
input CreateInvoiceInput @join__type(graph: BILLING_SUBGRAPH) {
  """ID организации, выставляющей счет"""
  orgId: UUID!
  """ID связанного заказа на услуги (опционально)"""
  orderId: UUID
  """Список позиций в счете"""
  items: [InvoiceItemInput!]!
  """Дата, до которой должен быть оплачен счет (опционально)"""
  dueAt: DateTime
}

"""Входные данные для добавления позиций в существующий счет."""
input AddInvoiceItemsInput @join__type(graph: BILLING_SUBGRAPH) {
  """ID счета для добавления позиций"""
  invoiceId: UUID!
  """Список позиций для добавления"""
  items: [InvoiceItemInput!]!
}

"""Входные данные для записи платежа."""
input RecordPaymentInput @join__type(graph: BILLING_SUBGRAPH) {
  """ID счета, по которому произведен платеж"""
  invoiceId: UUID!
  """Способ оплаты"""
  method: PaymentMethod!
  """Сумма платежа"""
  amount: MoneyInput!
  """Платежный провайдер (опционально)"""
  provider: String
  """Идентификатор в платежном провайдере (опционально)"""
  providerRef: String
  """Ссылка на чек/квитанцию (опционально)"""
  receiptUrl: String
}

"""Входные данные для генерации ссылки на оплату."""
input GeneratePaymentLinkInput @join__type(graph: BILLING_SUBGRAPH) {
  """ID счета для оплаты"""
  invoiceId: UUID!
  """Платежный провайдер (STRIPE, YOOKASSA)"""
  provider: String!
  """URL для перенаправления после успешной оплаты"""
  successUrl: String!
  """URL для перенаправления при отмене оплаты (опционально)"""
  cancelUrl: String
}

"""Входные данные для возврата средств."""
input IssueRefundInput @join__type(graph: BILLING_SUBGRAPH) {
  """ID платежа для возврата"""
  paymentId: UUID!
  """Сумма возврата"""
  amount: MoneyInput!
  """Причина возврата (опционально)"""
  reason: String
}

"""Входные данные для создания бронирования."""
input CreateBookingInput @join__type(graph: BOOKINGS_SUBGRAPH) {
  """ID организации, владеющей недвижимостью"""
  orgId: UUID!
  """ID единицы недвижимости для бронирования"""
  unitId: UUID!
  """Информация о госте"""
  guest: GuestInput!
  """Дата и время заезда"""
  checkIn: DateTime!
  """Дата и время выезда"""
  checkOut: DateTime!
  """Количество гостей"""
  guestsCount: Int!
  """Детализация стоимости"""
  priceBreakdown: PriceBreakdownInput!
  """Дополнительные заметки (опционально)"""
  notes: String
  """Источник бронирования (опционально, по умолчанию DIRECT)"""
  source: BookingSource
}

"""Входные данные для информации о госте."""
input GuestInput @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Полное имя гостя"""
  name: String!
  """Email адрес гостя"""
  email: String!
  """Номер телефона гостя (опционально)"""
  phone: String
  """Тип документа, удостоверяющего личность (опционально)"""
  documentType: String
  """Номер документа (опционально)"""
  documentNumber: String
}

"""Входные данные для детализации стоимости бронирования."""
input PriceBreakdownInput @join__type(graph: BOOKINGS_SUBGRAPH) {
  """Базовая стоимость проживания"""
  basePrice: MoneyInput!
  """Стоимость уборки (опционально)"""
  cleaningFee: MoneyInput
  """Сервисный сбор (опционально)"""
  serviceFee: MoneyInput
  """Налоги (опционально)"""
  taxes: MoneyInput
  """Общая стоимость бронирования"""
  total: MoneyInput!
}

"""
Входные данные для создания уборщика.
Все данные (имя, email, телефон) берутся из User.
"""
input CreateCleanerInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID пользователя системы"""
  userId: UUID!
  """ID организации"""
  orgId: UUID!
}

"""Входные данные для обновления уборщика."""
input UpdateCleanerInput @join__type(graph: CLEANING_SUBGRAPH) {
  """Имя"""
  firstName: String
  """Фамилия"""
  lastName: String
  """Телефон"""
  phone: String
  """Email"""
  email: String
  """Рейтинг"""
  rating: Float
}

"""Входные данные для создания шаблона уборки."""
input CreateCleaningTemplateInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID единицы недвижимости"""
  unitId: UUID!
  """Название шаблона"""
  name: String!
  """Текстовое описание"""
  description: String
  """Требуется ли смена белья"""
  requiresLinenChange: Boolean
  """Расчетная продолжительность в минутах"""
  estimatedDuration: Int
  """Чек-боксы"""
  checklistItems: [ChecklistTemplateItemInput!]
}

"""Входные данные для обновления шаблона уборки."""
input UpdateCleaningTemplateInput @join__type(graph: CLEANING_SUBGRAPH) {
  """Название шаблона"""
  name: String
  """Текстовое описание"""
  description: String
  """Требуется ли смена белья"""
  requiresLinenChange: Boolean
  """Расчетная продолжительность в минутах"""
  estimatedDuration: Int
  """Чек-боксы"""
  checklistItems: [ChecklistTemplateItemInput!]
}

"""Входные данные для чек-бокса в шаблоне."""
input ChecklistTemplateItemInput @join__type(graph: CLEANING_SUBGRAPH) {
  """Текст пункта"""
  label: String!
  """Порядок отображения"""
  order: Int
  """Обязателен ли пункт"""
  isRequired: Boolean
}

"""Входные данные для планирования уборки."""
input ScheduleCleaningInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID организации"""
  orgId: UUID!
  """
  ID уборщика (опционально - если не указан, уведомления отправятся привязанным уборщикам)
  """
  cleanerId: UUID
  """ID единицы недвижимости (обязательно)"""
  unitId: UUID!
  """ID бронирования (опционально)"""
  bookingId: UUID
  """ID связанной задачи (опционально)"""
  taskId: UUID
  """Запланированное время"""
  scheduledAt: DateTime!
  """Заметки"""
  notes: String
  """Требуется ли смена белья"""
  requiresLinenChange: Boolean
  """Чеклист (если не задан, берется из шаблона)"""
  checklistItems: [ChecklistItemInput!]
}

"""Входные данные для завершения уборки."""
input CompleteCleaningInput @join__type(graph: CLEANING_SUBGRAPH) {
  """Заметки о завершении"""
  notes: String
  """Финальный чеклист"""
  checklistItems: [ChecklistItemInput!]
}

"""Входные данные для пункта чеклиста."""
input ChecklistItemInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID пункта (для обновления существующего)"""
  id: UUID
  """Текст пункта"""
  label: String!
  """Отмечен ли пункт"""
  isChecked: Boolean!
  """Порядок отображения"""
  order: Int
}

"""Входные данные для создания документа уборки."""
input CreateCleaningDocumentInput @join__type(graph: CLEANING_SUBGRAPH) {
  """Заметки к документу"""
  notes: String
  """Фотографии"""
  photos: [AddPhotoInput!]
}

"""Входные данные для выставления сложности уборки."""
input SetCleaningDifficultyInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID уборки"""
  cleaningId: UUID!
  """Сложность уборки (0-5)"""
  difficulty: CleaningDifficulty!
  """ID инстанса чек-листа обследования (опционально)"""
  checklistInstanceId: UUID
}

"""Входные данные для добавления фото."""
input AddPhotoInput @join__type(graph: CLEANING_SUBGRAPH) {
  """URL фотографии"""
  url: String!
  """Описание фото"""
  caption: String
  """Порядок отображения"""
  order: Int
}

"""Входные данные для создания чек-листа."""
input CreateChecklistInput @join__type(graph: CLEANING_SUBGRAPH) {
  """Название чек-листа"""
  name: String!
  """Требуется ли фото по каждому пункту (по умолчанию: true)"""
  requirePhotoPerItem: Boolean = true
  """Пункты чек-листа"""
  items: [CreateChecklistItemInput!]!
  """ID квартиры (опционально)"""
  unitId: UUID
  """Требования (JSON)"""
  requirements: JSON
}

"""Входные данные для создания пункта чек-листа."""
input CreateChecklistItemInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID пункта (для обновления существующего пункта)"""
  id: UUID
  """Порядок отображения"""
  order: Int!
  """Название пункта"""
  title: String!
  """Описание пункта"""
  description: String
  """Требуется ли фото для этого пункта (по умолчанию: true)"""
  requiresPhoto: Boolean = true
}

"""
Входные данные для получения presigned URLs для загрузки фото выполнения пункта.
"""
input GetSubmissionMediaUploadUrlsInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID заполнения пункта"""
  checklistSubmissionId: UUID!
  """Количество файлов"""
  count: Int!
  """MIME типы файлов (по индексу)"""
  mimeTypes: [String!]
}

input AddItemInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID инстанса"""
  instanceId: UUID!
  """Ключ пункта (уникальный в рамках инстанса)"""
  key: String!
  """Название пункта"""
  title: String!
  """Описание пункта"""
  description: String
  """Тип пункта"""
  type: ItemType!
  """Обязателен ли пункт"""
  required: Boolean = false
  """Требуется ли фото"""
  requiresPhoto: Boolean = false
  """Минимальное количество фото"""
  photoMin: Int
  """Порядок отображения"""
  order: Int
}

input UpdateItemInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID инстанса"""
  instanceId: UUID!
  """Ключ пункта"""
  itemKey: String!
  """Название пункта"""
  title: String
  """Описание пункта"""
  description: String
  """Тип пункта"""
  type: ItemType
  """Обязателен ли пункт"""
  required: Boolean
  """Требуется ли фото"""
  requiresPhoto: Boolean
  """Минимальное количество фото"""
  photoMin: Int
  """Порядок отображения"""
  order: Int
}

input AnswerInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID инстанса"""
  instanceId: UUID!
  """Ключ пункта"""
  itemKey: String!
  """Значение ответа (JSON)"""
  value: JSON
  """Заметка"""
  note: String
}

input AttachmentInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID инстанса"""
  instanceId: UUID!
  """Ключ пункта"""
  itemKey: String!
  """Ключ объекта в хранилище"""
  objectKey: String!
  """URL фото (опционально, если не указан - будет создан из objectKey)"""
  url: String
  """Подпись к фото"""
  caption: String
}

input GetChecklistAttachmentUploadUrlsInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID инстанса"""
  instanceId: UUID!
  """Ключ пункта"""
  itemKey: String!
  """Количество файлов"""
  count: Int!
  """MIME типы файлов (по индексу)"""
  mimeTypes: [String!]
}

input AddTemplateItemInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID шаблона"""
  templateId: UUID!
  """Ключ пункта (уникальный в рамках шаблона)"""
  key: String!
  """Название пункта"""
  title: String!
  """Описание пункта"""
  description: String
  """Тип пункта"""
  type: ItemType = BOOL
  """Обязателен ли пункт"""
  required: Boolean = false
  """Требуется ли фото"""
  requiresPhoto: Boolean = false
  """Минимальное количество фото"""
  photoMin: Int
  """Порядок отображения"""
  order: Int
}

input UpdateTemplateItemInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID шаблона"""
  templateId: UUID!
  """Ключ пункта"""
  itemKey: String!
  """Название пункта"""
  title: String
  """Описание пункта"""
  description: String
  """Тип пункта"""
  type: ItemType
  """Обязателен ли пункт"""
  required: Boolean
  """Требуется ли фото"""
  requiresPhoto: Boolean
  """Минимальное количество фото"""
  photoMin: Int
  """Порядок отображения"""
  order: Int
}

input TemplateItemExampleFileInput @join__type(graph: CLEANING_SUBGRAPH) {
  """Ключ объекта в хранилище"""
  objectKey: String!
  """MIME тип"""
  mimeType: String
  """URL фото (опционально, если не указан - будет создан из objectKey)"""
  url: String
  """Подпись к фото"""
  caption: String
}

input AddTemplateItemExampleMediaInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID шаблона"""
  templateId: UUID!
  """Ключ пункта"""
  itemKey: String!
  """Загруженные файлы"""
  files: [TemplateItemExampleFileInput!]!
}

input GetTemplateItemExampleMediaUploadUrlsInput @join__type(graph: CLEANING_SUBGRAPH) {
  """ID шаблона"""
  templateId: UUID!
  """Ключ пункта"""
  itemKey: String!
  """Количество файлов"""
  count: Int!
  """MIME типы файлов (по индексу)"""
  mimeTypes: [String!]
}

"""Фильтры для поиска пользователей"""
input UserFilters @join__type(graph: IAM_SUBGRAPH) {
  """Поиск по имени или email"""
  search: String
  """Статус пользователя"""
  status: UserStatus
  """Роль пользователя"""
  role: Role
  """Дата создания от"""
  createdAtFrom: DateTime
  """Дата создания до"""
  createdAtTo: DateTime
  """Последний вход от"""
  lastLoginFrom: DateTime
  """Последний вход до"""
  lastLoginTo: DateTime
}

"""Сортировка пользователей"""
input UserSort @join__type(graph: IAM_SUBGRAPH) {
  """Поле для сортировки"""
  field: UserSortField!
  """Направление сортировки"""
  direction: SortDirection!
}

"""Входные данные для создания пользователя"""
input CreateIAMUserInput @join__type(graph: IAM_SUBGRAPH) {
  """Email адрес"""
  email: String!
  """Имя пользователя"""
  name: String
  """Пароль"""
  password: String!
  """ID организации (опционально)"""
  orgId: UUID
}

"""Входные данные для обновления пользователя"""
input UpdateIAMUserInput @join__type(graph: IAM_SUBGRAPH) {
  """Имя пользователя"""
  name: String
  """Статус пользователя"""
  status: UserStatus
  """Заблокировать аккаунт"""
  lockUser: Boolean
  """Причина блокировки"""
  lockReason: String
}

"""Входные данные для смены пароля"""
input ChangePasswordInput @join__type(graph: IAM_SUBGRAPH) {
  """Текущий пароль"""
  currentPassword: String!
  """Новый пароль"""
  newPassword: String!
}

"""Входные данные для сброса пароля администратором"""
input ResetPasswordInput @join__type(graph: IAM_SUBGRAPH) @join__type(graph: IDENTITY_SUBGRAPH) {
  """Токен сброса"""
  token: String!
  """Новый пароль"""
  newPassword: String!
}

"""Входные данные для создания пользователя."""
input CreateUserInput @join__type(graph: IDENTITY_SUBGRAPH) {
  """Email адрес пользователя (обязательно)"""
  email: String!
  """Полное имя пользователя (опционально)"""
  name: String
}

"""Входные данные для создания организации."""
input CreateOrganizationInput @join__type(graph: IDENTITY_SUBGRAPH) {
  """Название организации"""
  name: String!
  """Часовой пояс (например, "Europe/Moscow")"""
  timezone: String!
  """Основная валюта (ISO 4217 код, например "RUB")"""
  currency: String!
}

"""Входные данные для добавления участника в организацию."""
input AddMemberInput @join__type(graph: IDENTITY_SUBGRAPH) {
  """ID пользователя для добавления"""
  userId: UUID!
  """ID организации"""
  orgId: UUID!
  """Роль пользователя в организации"""
  role: Role!
}

"""Входные данные для обновления роли участника."""
input UpdateMemberRoleInput @join__type(graph: IDENTITY_SUBGRAPH) {
  """ID членства для обновления"""
  membershipId: UUID!
  """Новая роль пользователя"""
  role: Role!
}

"""Входные данные для регистрации."""
input RegisterInput @join__type(graph: IDENTITY_SUBGRAPH) {
  """Email адрес пользователя (обязательно)"""
  email: String!
  """Пароль пользователя (обязательно)"""
  password: String!
  """Полное имя пользователя (опционально)"""
  name: String
}

"""Входные данные для входа в систему."""
input LoginInput @join__type(graph: IDENTITY_SUBGRAPH) {
  """Email адрес пользователя"""
  email: String!
  """Пароль пользователя"""
  password: String!
}

"""Входные данные для обновления токена."""
input RefreshTokenInput @join__type(graph: IDENTITY_SUBGRAPH) {
  """JWT токен обновления"""
  refreshToken: String!
}

"""Входные данные для обновления единицы недвижимости."""
input UpdateUnitInput @join__type(graph: INVENTORY_SUBGRAPH) {
  """Название единицы"""
  name: String
  """Максимальная вместимость"""
  capacity: Int
  """Количество кроватей"""
  beds: Int
  """Количество ванных комнат"""
  bathrooms: Int
  """Список удобств"""
  amenities: [String!]
  """Градация юнита по размеру (0-10)"""
  grade: UnitGrade
  """Сложность уборки по умолчанию (0-5)"""
  cleaningDifficulty: CleaningDifficulty
  """Инструкция по заселению для гостя (статичный текст)"""
  checkInInstructions: String
}

"""Входные данные для создания или обновления объявления."""
input UpsertListingInput @join__type(graph: LISTINGS_SUBGRAPH) {
  """ID единицы недвижимости для объявления"""
  unitId: UUID!
  """Статус объявления"""
  status: ListingStatus!
  """Канал продаж для размещения"""
  channel: Channel!
  """Базовая цена за ночь"""
  basePrice: MoneyInput!
  """Минимальное количество ночей"""
  minNights: Int!
  """Максимальное количество ночей (опционально)"""
  maxNights: Int
  """Внешний ID на платформе (опционально)"""
  externalId: String
}

"""Входные данные для создания правила скидки."""
input DiscountRuleInput @join__type(graph: LISTINGS_SUBGRAPH) {
  """ID объявления, для которого создается скидка"""
  listingId: UUID!
  """Название правила скидки"""
  name: String!
  """Процент скидки (от 1 до 100)"""
  percentOff: Int!
  """Минимальное количество ночей для применения (опционально)"""
  minNights: Int
}

"""Цель доставки уведомления (канал + получатель)."""
input DeliveryTargetInput @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Канал доставки"""
  channel: NotificationChannel!
  """Тип получателя"""
  recipientType: RecipientType!
  """ID получателя"""
  recipientId: String!
}

"""Входные данные для отправки уведомления."""
input SendNotificationInput @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """Тип события"""
  eventType: EventType!
  """ID организации (опционально)"""
  orgId: UUID
  """ID пользователя-получателя (опционально)"""
  userId: UUID
  """Цели доставки (новый формат)"""
  deliveryTargets: [DeliveryTargetInput!]
  """ID получателей (старый формат, для обратной совместимости)"""
  recipientIds: [String!]
  """Каналы доставки (старый формат, для обратной совместимости)"""
  channels: [NotificationChannel!]
  """Приоритет"""
  priority: Priority
  """Заголовок"""
  title: String!
  """Сообщение"""
  message: String!
  """Метаданные (JSON)"""
  metadata: String
  """Запланированное время (опционально)"""
  scheduledAt: DateTime
  """URL действия"""
  actionUrl: String
  """Текст кнопки"""
  actionText: String
}

"""Входные данные для обновления настроек уведомлений."""
input UpdateNotificationSettingsInput @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """ID пользователя"""
  userId: UUID!
  """Telegram Chat ID"""
  telegramChatId: String
  """Email"""
  email: String
  """Телефон"""
  phone: String
  """Включены ли уведомления"""
  enabled: Boolean
  """Включенные каналы"""
  enabledChannels: [NotificationChannel!]
  """Подписка на события"""
  subscribedEvents: [EventType!]
}

"""Входные данные для создания/обновления шаблона."""
input UpsertNotificationTemplateInput @join__type(graph: NOTIFICATIONS_SUBGRAPH) {
  """ID шаблона (для обновления)"""
  id: UUID
  """Тип события"""
  eventType: EventType!
  """Название"""
  name: String!
  """Шаблон заголовка"""
  titleTemplate: String!
  """Шаблон сообщения"""
  messageTemplate: String!
  """Каналы по умолчанию"""
  defaultNotificationChannels: [NotificationChannel!]
  """Приоритет по умолчанию"""
  defaultPriority: Priority
}

"""Входные данные для создания задачи."""
input CreateTaskInput @join__type(graph: OPS_SUBGRAPH) {
  """ID организации, для которой создается задача"""
  orgId: UUID!
  """Тип задачи"""
  type: TaskType!
  """ID единицы недвижимости (опционально)"""
  unitId: UUID
  """ID бронирования (опционально)"""
  bookingId: UUID
  """Дата и время выполнения задачи (опционально)"""
  dueAt: DateTime
  """Чек-лист для выполнения задачи (опционально)"""
  checklist: [String!]
  """Дополнительные заметки (опционально)"""
  note: String
}

"""Входные данные для назначения задачи."""
input AssignTaskInput @join__type(graph: OPS_SUBGRAPH) {
  """ID задачи для назначения"""
  taskId: UUID!
  """ID поставщика услуг (опционально, используется для не-CLEANING задач)"""
  providerId: UUID
  """ID уборщика (опционально, используется для CLEANING задач)"""
  cleanerId: UUID
  """Новый статус задачи (опционально)"""
  status: TaskStatus
  """Дополнительные заметки (опционально)"""
  note: String
}

"""Входные данные для обновления задачи."""
input UpdateTaskInput @join__type(graph: OPS_SUBGRAPH) {
  """Тип задачи (опционально)"""
  type: TaskType
  """Статус задачи (опционально)"""
  status: TaskStatus
  """Дополнительные заметки (опционально)"""
  note: String
  """Дата и время выполнения задачи (опционально)"""
  dueAt: DateTime
}

"""Входные данные для создания заказа на услуги."""
input CreateServiceOrderInput @join__type(graph: OPS_SUBGRAPH) {
  """ID задачи, для которой создается заказ"""
  taskId: UUID!
  """ID поставщика услуг (опционально)"""
  providerId: UUID
  """Стоимость услуг (опционально)"""
  cost: MoneyInput
  """Дополнительные заметки (опционально)"""
  notes: String
}

"""Входные данные для создания поставщика услуг."""
input CreateServiceProviderInput @join__type(graph: OPS_SUBGRAPH) {
  """Название поставщика услуг"""
  name: String!
  """Типы услуг, которые предоставляет поставщик"""
  serviceTypes: [TaskType!]!
  """Рейтинг поставщика (опционально)"""
  rating: Float
  """Контактная информация (опционально)"""
  contact: String
}

"""Входные данные для создания/обновления правила ценообразования."""
input UpsertCleaningPricingRuleInput @join__type(graph: PRICING_SUBGRAPH) {
  orgId: UUID!
  unitId: UUID
  mode: CleaningCoeffMode!
  baseCleaningPrice: MoneyInput!
  gradeStep: Float
  difficultyStep: Float
  increasedDifficultyDelta: Float
  extras: JSON
}