# Функциональность создания объектов недвижимости в UI

## Обзор

Добавлена полная функциональность для создания объектов недвижимости и единиц недвижимости через GraphQL в разделе `/inventory` backoffice приложения.

## Реализованные компоненты

### 1. CreatePropertyDialog
**Файл:** `src/components/create-property-dialog.tsx`

**Функциональность:**
- Создание новых объектов недвижимости (Property)
- Выбор организации из списка
- Ввод названия и адреса объекта
- Добавление удобств объекта с возможностью удаления
- Валидация обязательных полей
- Обработка ошибок

**Поля формы:**
- `orgId` (UUID) - выбор организации *
- `title` (String) - название объекта *
- `address` (String) - адрес объекта *
- `amenities` (Array<String>) - список удобств

### 2. CreateUnitDialog
**Файл:** `src/components/create-unit-dialog.tsx`

**Функциональность:**
- Создание новых единиц недвижимости (Unit)
- Привязка к выбранному объекту недвижимости
- Ввод характеристик единицы
- Добавление удобств единицы
- Валидация числовых полей
- Обработка ошибок

**Поля формы:**
- `propertyId` (UUID) - ID объекта недвижимости (автоматически)
- `name` (String) - название единицы *
- `capacity` (Int) - максимальная вместимость *
- `beds` (Int) - количество кроватей *
- `bathrooms` (Int) - количество ванных комнат *
- `amenities` (Array<String>) - список удобств

### 3. Обновленная страница Inventory
**Файл:** `src/app/(app)/inventory/page.tsx`

**Новые возможности:**
- Кнопка "Создать объект" в секции объектов недвижимости
- Кнопка "Создать единицу" в секции единиц недвижимости
- Автоматическое обновление списка после создания
- Интеграция с GraphQL мутациями

## GraphQL интеграция

### Мутации
Используются существующие мутации из inventory subgraph:

```graphql
mutation CreateProperty($orgId: UUID!, $title: String!, $address: String!, $amenities: [String!]) {
  createProperty(orgId: $orgId, title: $title, address: $address, amenities: $amenities) {
    id
    title
    address
    amenities
    org {
      id
      name
    }
  }
}

mutation CreateUnit($propertyId: UUID!, $name: String!, $capacity: Int!, $beds: Int!, $bathrooms: Int!, $amenities: [String!]) {
  createUnit(propertyId: $propertyId, name: $name, capacity: $capacity, beds: $beds, bathrooms: $bathrooms, amenities: $amenities) {
    id
    name
    capacity
    beds
    bathrooms
    amenities
    property {
      id
      title
    }
  }
}
```

### Запросы
Используются существующие запросы для получения данных:

- `GetAllOrganizations` - для выбора организации
- `GetPropertiesByOrg` - для отображения объектов
- `GetUnitsByProperty` - для отображения единиц

## UX особенности

### Валидация
- Обязательные поля отмечены звездочкой (*)
- Валидация числовых полей (минимум 1)
- Проверка уникальности удобств при добавлении

### Удобства
- Динамическое добавление/удаление удобств
- Визуальное отображение добавленных удобств в виде тегов
- Разные цвета для удобств объектов (синий) и единиц (зеленый)

### Обратная связь
- Состояния загрузки для кнопок
- Отображение ошибок в красных блоках
- Автоматическое обновление списков после создания

### Адаптивность
- Responsive дизайн для мобильных устройств
- Поддержка темной темы
- Консистентный стиль с остальным приложением

## Технические детали

### Используемые библиотеки
- `@headlessui/react` - для диалогов и UI компонентов
- `graphql-request` - для GraphQL запросов
- `clsx` - для условных CSS классов

### Структура данных
- TypeScript интерфейсы для типизации форм
- Состояние форм управляется через React hooks
- Автоматическая очистка форм при закрытии диалогов

### Обработка ошибок
- Try-catch блоки для GraphQL запросов
- Пользовательские сообщения об ошибках
- Логирование ошибок в консоль для отладки

## Использование

1. Перейдите в раздел `/inventory`
2. Нажмите "Создать объект" для создания нового объекта недвижимости
3. Заполните форму и нажмите "Создать объект"
4. Выберите созданный объект из списка
5. Нажмите "Создать единицу" для добавления единиц в объект
6. Заполните форму единицы и нажмите "Создать единицу"

## Совместимость

- Работает с существующей GraphQL схемой inventory subgraph
- Совместимо с системой аутентификации
- Поддерживает все существующие организации
- Интегрируется с системой обновления данных в реальном времени
