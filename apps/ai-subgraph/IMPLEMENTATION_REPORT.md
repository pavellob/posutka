# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ AI Subgraph —Å GQLPT

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [GQLPT](https://github.com/rocket-connect/gqlpt) –≤ AI subgraph –ø—Ä–æ–µ–∫—Ç–∞ Posutka –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ GraphQL –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ —Å –ø–æ–º–æ—â—å—é AI.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ê–Ω–∞–ª–∏–∑ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ò–∑—É—á–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Posutka
- ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ GQLPT
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ GQLPT –≤ `package.json`:
  - `gqlpt@^0.0.0-alpha.33`
  - `@gqlpt/adapter-openai@^0.0.0-alpha.33`
  - `@gqlpt/adapter-anthropic@^0.0.0-alpha.33`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `tsx` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GraphQL —Å—Ö–µ–º—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–∏–ø—ã:
  - `GraphQLQueryResult` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞
  - `AIAdapterConfig` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI –∞–¥–∞–ø—Ç–µ—Ä–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º—É—Ç–∞—Ü–∏–∏:
  - `generateGraphQLQuery` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è GraphQL –∑–∞–ø—Ä–æ—Å–æ–≤
  - `executeGeneratedQuery` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ `GQLPTService` - —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GQLPT
- ‚úÖ `AIOrchestratorService` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä AI –∫–æ–º–∞–Ω–¥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GQLPT
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ OpenAI –∏ Anthropic –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ö–µ–º—ã –∏–∑ supergraph.graphql

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω `IAIOrchestrator` –Ω–æ–≤—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –≤ `@repo/datalayer`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `AIOrchestratorPrisma` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∑–æ–ª–≤–µ—Ä–æ–≤
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º OpenAI API
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ GraphQL —Å–µ—Ä–≤–µ—Ä–∞

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### AI –∫–æ–º–∞–Ω–¥—ã
```graphql
mutation {
  aiCommand(
    orgId: "123e4567-e89b-12d3-a456-426614174000"
    command: "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"
  ) {
    ok
    message
    affectedIds
    preview
  }
}
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è GraphQL –∑–∞–ø—Ä–æ—Å–æ–≤
```graphql
mutation {
  generateGraphQLQuery(
    orgId: "123e4567-e89b-12d3-a456-426614174000"
    description: "–ù–∞–π—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
    adapterConfig: {
      type: "openai"
      apiKey: "your-api-key"
    }
  ) {
    query
    variables
    description
    success
    error
  }
}
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
```graphql
mutation {
  executeGeneratedQuery(
    orgId: "123e4567-e89b-12d3-a456-426614174000"
    query: "query { users { id name } }"
    variables: { "limit": 10 }
  )
}
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
AI Subgraph
‚îú‚îÄ‚îÄ Schema (GraphQL)
‚îÇ   ‚îú‚îÄ‚îÄ AICommandResult
‚îÇ   ‚îú‚îÄ‚îÄ GraphQLQueryResult
‚îÇ   ‚îî‚îÄ‚îÄ AIAdapterConfig
‚îú‚îÄ‚îÄ Resolvers
‚îÇ   ‚îú‚îÄ‚îÄ aiCommand
‚îÇ   ‚îú‚îÄ‚îÄ generateGraphQLQuery
‚îÇ   ‚îî‚îÄ‚îÄ executeGeneratedQuery
‚îú‚îÄ‚îÄ Services
‚îÇ   ‚îú‚îÄ‚îÄ GQLPTService (—Ä–∞–±–æ—Ç–∞ —Å GQLPT)
‚îÇ   ‚îî‚îÄ‚îÄ AIOrchestratorService (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è AI –∫–æ–º–∞–Ω–¥)
‚îî‚îÄ‚îÄ Context
    ‚îî‚îÄ‚îÄ createContext (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤)
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã
- AI –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- GraphQL —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 4008
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (8/8)

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- OpenAI API —Ç—Ä–µ–±—É–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π –∫–ª—é—á –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- Prisma –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –°—Ö–µ–º–∞ supergraph.graphql –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here
DATABASE_URL=postgresql://username:password@localhost:5432/posutka
```

### –ó–∞–ø—É—Å–∫
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pnpm dev

# –°–±–æ—Ä–∫–∞
pnpm build

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
pnpm start
```

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/services/gqlpt.service.ts` - —Å–µ—Ä–≤–∏—Å GQLPT
- `src/services/ai-orchestrator.service.ts` - AI –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- `src/examples/` - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `IMPLEMENTATION_REPORT.md` - —ç—Ç–æ—Ç –æ—Ç—á–µ—Ç

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `package.json` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ GQLPT
- `src/schema/index.gql` - —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ —Å—Ö–µ–º–∞
- `src/resolvers/index.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ä–µ–∑–æ–ª–≤–µ—Ä—ã
- `src/context.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `src/server.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å–µ—Ä–≤–µ—Ä
- `src/__tests__/resolvers.test.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

AI Subgraph —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GQLPT —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

1. **AI –∫–æ–º–∞–Ω–¥—ã** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è GraphQL** - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π
3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** - OpenAI –∏ Anthropic
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã** - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤–∞–ª–∏–¥–Ω—ã—Ö API –∫–ª—é—á–µ–π.
