# üöÄ –î–µ–ø–ª–æ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –∏ —Å–∏–¥–∞–º–∏

## üìã –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏**
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `prisma db push`
- –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å retry –ª–æ–≥–∏–∫–æ–π
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–¥—ã**
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, —Å–≤–æ–π—Å—Ç–≤–æ, –µ–¥–∏–Ω–∏—Ü–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. **–£–ª—É—á—à–µ–Ω–Ω—ã–π Dockerfile**
- –°–∫—Ä–∏–ø—Ç `migrate-and-seed.sh` –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –±–∞–∑—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞:
1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ë–î** ‚Üí `migrate-and-seed.sh`
2. **–ó–∞–ø—É—Å–∫ –ø–æ–¥–≥—Ä–∞—Ñ–æ–≤** ‚Üí `pnpm start:subgraphs`
3. **–û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏** ‚Üí `wait-for-subgraphs.sh`
4. **–°–±–æ—Ä–∫–∞ —Å—É–ø–µ—Ä–≥—Ä–∞—Ñ–∞** ‚Üí `pnpm mesh:compose`
5. **–ó–∞–ø—É—Å–∫ Gateway** ‚Üí `pnpm start:gateway`

### –°–∏–¥—ã —Å–æ–∑–¥–∞—é—Ç:
- **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é**: "Test Organization"
- **–°–≤–æ–π—Å—Ç–≤–æ**: "Test Property" —Å –∞–¥—Ä–µ—Å–æ–º
- **–ï–¥–∏–Ω–∏—Ü—É**: "Test Unit 1" —Å 2 –∫—Ä–æ–≤–∞—Ç—è–º–∏
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: test@example.com
- **–ß–ª–µ–Ω—Å—Ç–≤–æ**: OWNER —Ä–æ–ª—å

## üöÄ –î–µ–ø–ª–æ–π

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
# –ü–æ–ª—É—á–∏—Ç–µ DATABASE_URL
```

### 2. **–î–µ–ø–ª–æ–π –≤ Northflank**
```bash
# –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Add automatic migrations and seeds"
git push

# –í Northflank Dashboard:
# 1. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç DATABASE_URL
# 2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Gateway
curl -X POST https://your-app.northflank.app/graphql \
  -H "Content-Type: application/json" \
  -d '{"query":"{ __schema { types { name } } }"}'

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–≥—Ä–∞—Ñ—ã
curl -X POST https://your-app.northflank.app:4001/graphql \
  -H "Content-Type: application/json" \
  -d '{"query":"{ __schema { types { name } } }"}'
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
- `üóÑÔ∏è –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π Prisma...`
- `‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞!`
- `üå± –ó–∞–ø—É—Å–∫ —Å–∏–¥–æ–≤...`
- `‚úÖ –°–∏–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!`
- `üì¶ –ó–∞–ø—É—Å–∫ –ø–æ–¥–≥—Ä–∞—Ñ–æ–≤...`
- `‚úÖ –ü–æ–¥–≥—Ä–∞—Ñ—ã –≥–æ—Ç–æ–≤—ã!`
- `üåê –ó–∞–ø—É—Å–∫ Gateway...`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å PostgreSQL —Å–µ—Ä–≤–µ—Ä–∞
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –∏ security groups

### 2. **–°–∏–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ**
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–∏–¥—ã –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è
- –î–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —É–¥–∞–ª–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î

### 3. **Retry –ª–æ–≥–∏–∫–∞**
- –°–∫—Ä–∏–ø—Ç –∂–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –¥–æ 5 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è —É –≤–∞—Å –±—É–¥–µ—Ç:
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ **–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**
- ‚úÖ **–†–∞–±–æ—Ç–∞—é—â–∞—è GraphQL Federation**
- ‚úÖ **–ì–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é API**

–¢–µ–ø–µ—Ä—å –≤–∞—à —Å–µ—Ä–≤–∏—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! üöÄ
